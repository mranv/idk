
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
    <!-- SEO Optimization for Anubhav Gain -->
    <meta name="description" content="Anubhav Gain - Professional Software Developer, Tech Blogger, and Digital Solutions Expert. Explore technical articles, programming tutorials, and insights from Anubhav Gain.">
    <meta name="keywords" content="Anubhav Gain, Software Developer, Tech Blog, Programming, iOS Development, Web Development, Blockchain, Machine Learning">
    <meta name="author" content="Anubhav Gain">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    
    <!-- Open Graph Tags for Anubhav Gain -->
    <meta property="og:title" content="Anubhav Gain - Tech Blog & Portfolio">
    <meta property="og:description" content="Discover technical articles and programming insights by Anubhav Gain">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/img/author.jpg">
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Anubhav Gain - Tech Blog">
    <meta name="twitter:description" content="Technical articles and programming tutorials by Anubhav Gain">
    <meta name="twitter:image" content="/img/author.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://iknowmranv.pages.dev">
    
    <!-- Schema.org Structured Data for Anubhav Gain -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Anubhav Gain",
      "url": "https://iknowmranv.pages.dev",
      "sameAs": [
        "https://github.com/mranv",
        "https://mranv.pages.dev"
      ],
      "jobTitle": "Software Developer",
      "description": "Anubhav Gain is a professional software developer specializing in iOS, web development, and blockchain technologies.",
      "image": "https://iknowmranv.pages.dev/img/author.jpg",
      "alumniOf": {
        "@type": "CollegeOrUniversity",
        "name": "Parul University"
      },
      "knowsAbout": ["Software Development", "iOS Development", "Web Development", "Blockchain", "Machine Learning", "DevSecOps", "Cyber Security"]
    }
    </script>


    <title>ç”¨ä»£ç æ¥å®ç°ä½ å–œæ¬¢çš„åŠ¨ç”»æ•ˆæœ â€” è™«å„¿è·‘ | Anubhav Gain</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">

    <meta name="author" content="Anubhav Gain">



    <meta name="description" content="æ–‡æ¡£æ›´æ–°è¯´æ˜ 2018-03-28 ä¿®æ”¹fillModeéƒ¨åˆ†ç±»å‹æè¿° 2016-03-25 å®Œæˆå…¨æ–‡ 2016-03-24 å®Œæˆ4.3 2016-03-22 å®Œæˆ4.1,4.2 2016-03-21 åˆç¨¿å‰è¨€ã€€ã€€æ¥è§¦iOSåº”ç”¨å¼€å‘ä¸ä¹…,å¯¹äºå¾ˆå¤šæˆ‘æš‚æ—¶ä¸æ¸…æ¥šæ€ä¹ˆå®ç°çš„åŠŸèƒ½æ•ˆæœéƒ½æŒºæ„Ÿå…´è¶£çš„.iOSå¼€å‘ä¸­,åŠ¨ç”»ç‰¹æ•ˆæ˜¯å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†,æœ€è¿‘å­¦ä¹ äº†ä¸€ä¸‹åŠ¨ç”»,é¡ºä¾¿èŠ±äº†ç‚¹æ—¶é—´å®ç°äº†ä¸€ä¸ªè™«å­åš…åŠ¨çš„åŠ¨ç”»æ•ˆæœå¹¶å†™æˆä¸€">
<meta property="og:type" content="article">
<meta property="og:title" content="ç”¨ä»£ç æ¥å®ç°ä½ å–œæ¬¢çš„åŠ¨ç”»æ•ˆæœ â€” è™«å„¿è·‘">
<meta property="og:url" content="https://iknowmranv.pages.dev/2016/03/21/2016-03-21-iOS-animation-design-of-the-worm-run/index.html">
<meta property="og:site_name" content="Anubhav Gain">
<meta property="og:description" content="æ–‡æ¡£æ›´æ–°è¯´æ˜ 2018-03-28 ä¿®æ”¹fillModeéƒ¨åˆ†ç±»å‹æè¿° 2016-03-25 å®Œæˆå…¨æ–‡ 2016-03-24 å®Œæˆ4.3 2016-03-22 å®Œæˆ4.1,4.2 2016-03-21 åˆç¨¿å‰è¨€ã€€ã€€æ¥è§¦iOSåº”ç”¨å¼€å‘ä¸ä¹…,å¯¹äºå¾ˆå¤šæˆ‘æš‚æ—¶ä¸æ¸…æ¥šæ€ä¹ˆå®ç°çš„åŠŸèƒ½æ•ˆæœéƒ½æŒºæ„Ÿå…´è¶£çš„.iOSå¼€å‘ä¸­,åŠ¨ç”»ç‰¹æ•ˆæ˜¯å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†,æœ€è¿‘å­¦ä¹ äº†ä¸€ä¸‹åŠ¨ç”»,é¡ºä¾¿èŠ±äº†ç‚¹æ—¶é—´å®ç°äº†ä¸€ä¸ªè™«å­åš…åŠ¨çš„åŠ¨ç”»æ•ˆæœå¹¶å†™æˆä¸€">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/a-diligent-worm.gif">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/Core-Animation-Classes.png">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/kCAMediaTimingFunctionLinear.png">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/kCAMediaTimingFunctionEaseIn.png">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/kCAMediaTimingFunctionEaseOut.png">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/kCAMediaTimingFunctionEaseInEaseOut.png">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/kCAMediaTimingFunctionDefault.png">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/full-worm-red.png">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/worm-strokeEndAm1.gif">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/worm-strokeStartAm1.gif">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/worm-strokeEndAm1-strokeStartAm1.gif">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/worm-strokeEndAm2.gif">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/worm-strokeStartAm2.gif">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/worm-strokeEndAm1&2-strokeStartAm1&2.gif">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/worm-strokeEndAm1&2-strokeStartAm1&2-translation.x.gif">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/worm-first&secondLayer.gif">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/worm-first&second&thirdLayer.gif">
<meta property="og:image" content="https://iknowmranv.pages.dev/images/a-diligent-worm-in-iOS.gif">
<meta property="article:published_time" content="2016-03-21T11:49:50.000Z">
<meta property="article:modified_time" content="2018-03-28T09:49:54.000Z">
<meta property="article:author" content="Anubhav Gain">
<meta property="article:tag" content="iOSåŠ¨ç”»">
<meta property="article:tag" content="HUD">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://iknowmranv.pages.dev/images/a-diligent-worm.gif">


    <link rel="alternative" href="/atom.xml" title="Anubhav Gain" type="application/atom+xml">


    <link rel="icon" href="/img/favicon.ico">


    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">


<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/modern-styles.css">
<link rel="stylesheet" href="/css/responsive-design.css">
<link rel="stylesheet" href="/%02.css">
<link rel="stylesheet" href="/.css">

<meta name="generator" content="Hexo 5.2.0"></head>

  <body>
    <a href="#main" class="skip-to-content">Skip to main content</a>
    <header>

<div>

			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Anubhav Gain">Anubhav Gain</a></h1>
				<h2 class="blog-motto">à¦†à¦®à¦¿ à¦ªà¦¾à¦¹à¦¾à¦¡à¦¼à§‡ à¦¥à¦¾à¦•à¦¿ à¦¬à¦²à§‡ à¦²à§ à¦ªà¦°à§à¦¬à¦¤à§‡à¦° à¦†à¦¸à¦² à¦šà§‡à¦¹à¦¾à¦°à¦¾ à¦œà¦¾à¦¨à¦¿ à¦¨à¦¾à¥¤</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="èœå•">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>

						<li><a href="/">ä¸»é¡µ</a></li>

						<li><a href="/archives">å½’æ¡£</a></li>

						<li><a href="/tags">æ ‡ç­¾</a></li>

						<li><a href="/about">å…³äº</a></li>

					<li>

					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="æœç´¢" />
						<input type="hidden" name="q" value="site:iknowmranv.pages.dev">
					</form>

					</li>
				</ul>
			</nav>
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">

	<article itemprop="articleBody">
		<header class="article-info clearfix">
  <h1 itemprop="name">

      <a href="/2016/03/21/2016-03-21-iOS-animation-design-of-the-worm-run/" title="ç”¨ä»£ç æ¥å®ç°ä½ å–œæ¬¢çš„åŠ¨ç”»æ•ˆæœ â€” è™«å„¿è·‘" itemprop="url">ç”¨ä»£ç æ¥å®ç°ä½ å–œæ¬¢çš„åŠ¨ç”»æ•ˆæœ â€” è™«å„¿è·‘</a>
  </h1>
  <p class="article-author">By

		<a href="/about" title="Anubhav Gain" target="_blank" itemprop="author">Anubhav Gain</a>

  <p class="article-time">
    <time datetime="2016-03-21T11:49:50.000Z" itemprop="datePublished"> å‘è¡¨äº 2016-03-21</time>

  </p>
</header>
	<div class="article-content">

		<div id="toc" class="toc-article">
			<strong class="toc-title">æ–‡ç« ç›®å½•</strong>

			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E6%9B%B4%E6%96%B0%E8%AF%B4%E6%98%8E"><span class="toc-number">1.</span> <span class="toc-text">æ–‡æ¡£æ›´æ–°è¯´æ˜</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">2.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9C%8B%E4%B8%8A%E7%9A%84%E5%8A%A8%E7%94%BB"><span class="toc-number">3.</span> <span class="toc-text">çœ‹ä¸Šçš„åŠ¨ç”»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%9D%E8%80%83"><span class="toc-number">4.</span> <span class="toc-text">æ€è€ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3iOS%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%8A%A8%E7%94%BB%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">äº†è§£iOSä¸­å®ç°åŠ¨ç”»çš„æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%AA%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%8F%AF%E4%BB%A5%E5%88%A9%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text">å“ªäº›å·¥å…·å¯ä»¥åˆ©ç”¨?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#iOS%E5%8A%A8%E7%94%BB%E7%9A%84%E5%87%A0%E4%B8%AA%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5"><span class="toc-number">4.3.</span> <span class="toc-text">iOSåŠ¨ç”»çš„å‡ ä¸ªé‡è¦æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%86%E5%88%86%E5%8A%A8%E7%94%BB-%E7%AE%80%E5%8C%96%E6%80%9D%E8%B7%AF"><span class="toc-number">4.4.</span> <span class="toc-text">æ‹†åˆ†åŠ¨ç”»,ç®€åŒ–æ€è·¯</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E5%8A%A8%E6%89%8B"><span class="toc-number">5.</span> <span class="toc-text">å¼€å§‹åŠ¨æ‰‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%8A%A8%E7%94%BB%E7%9A%84%E6%A0%B8%E5%BF%83%E9%83%A8%E5%88%86"><span class="toc-number">5.1.</span> <span class="toc-text">å®ç°åŠ¨ç”»çš„æ ¸å¿ƒéƒ¨åˆ†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E5%90%88%E5%8A%A8%E7%94%BB%E5%AE%9E%E7%8E%B0%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C"><span class="toc-number">5.2.</span> <span class="toc-text">æ•´åˆåŠ¨ç”»å®ç°æœ€ç»ˆæ•ˆæœ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E4%BB%A3%E7%A0%81-%E5%AE%9E%E7%8E%B0HUD%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">5.3.</span> <span class="toc-text">ä¼˜åŒ–ä»£ç ,å®ç°HUDçš„åŠŸèƒ½</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%8E%E8%AF%AD"><span class="toc-number">6.</span> <span class="toc-text">åè¯­</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB"><span class="toc-number">6.1.</span> <span class="toc-text">æ¨èé˜…è¯»</span></a></li></ol></li></ol>

		</div>

		<h1 id="æ–‡æ¡£æ›´æ–°è¯´æ˜"><a href="#æ–‡æ¡£æ›´æ–°è¯´æ˜" class="headerlink" title="æ–‡æ¡£æ›´æ–°è¯´æ˜"></a>æ–‡æ¡£æ›´æ–°è¯´æ˜</h1><ul>
<li>2018-03-28 ä¿®æ”¹fillModeéƒ¨åˆ†ç±»å‹æè¿°</li>
<li>2016-03-25 å®Œæˆå…¨æ–‡</li>
<li>2016-03-24 å®Œæˆ4.3</li>
<li>2016-03-22 å®Œæˆ4.1,4.2</li>
<li>2016-03-21 åˆç¨¿<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1>ã€€ã€€æ¥è§¦iOSåº”ç”¨å¼€å‘ä¸ä¹…,å¯¹äºå¾ˆå¤šæˆ‘æš‚æ—¶ä¸æ¸…æ¥šæ€ä¹ˆå®ç°çš„åŠŸèƒ½æ•ˆæœéƒ½æŒºæ„Ÿå…´è¶£çš„.iOSå¼€å‘ä¸­,åŠ¨ç”»ç‰¹æ•ˆæ˜¯å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†,æœ€è¿‘å­¦ä¹ äº†ä¸€ä¸‹åŠ¨ç”»,é¡ºä¾¿èŠ±äº†ç‚¹æ—¶é—´å®ç°äº†ä¸€ä¸ªè™«å­åš…åŠ¨çš„åŠ¨ç”»æ•ˆæœå¹¶å†™æˆä¸€ä¸ªæŒ‡ç¤ºå™¨(HUD).æœ¬æ–‡å°†è®²è¿°æ€ä¹ˆå­¦ä¹ åŠ¨ç”»è®¾è®¡,æœ€ç»ˆçš„æ•ˆæœå°±æ˜¯è¦åšåˆ°çœ‹ä¸Šä¸€ä¸ªå–œæ¬¢çš„åŠ¨ç”»,ç„¶åèƒ½ç”¨ä»£ç åœ¨iOSä¸­å®ç°ä»–,æœ€åèƒ½å¤Ÿåœ¨å®é™…é¡¹ç›®ä½¿ç”¨ğŸ˜ƒ.<h1 id="çœ‹ä¸Šçš„åŠ¨ç”»"><a href="#çœ‹ä¸Šçš„åŠ¨ç”»" class="headerlink" title="çœ‹ä¸Šçš„åŠ¨ç”»"></a>çœ‹ä¸Šçš„åŠ¨ç”»</h1>ã€€ã€€è¿™æ˜¯ä¸€ç¯‡å’ŒåŠ¨ç”»æœ‰å…³çš„æ–‡ç« ,é‚£æˆ‘å°±åœ¨æ–‡ç« å¼€å¤´æ”¾å‡ºè¿™æ¬¡æƒ³è¦å®ç°çš„åŠ¨ç”»å§,å¤§å®¶ä¹Ÿå¥½æ€è€ƒä¸€ä¸‹å…·ä½“æ€ä¹ˆå»å®ç°.ä¸‹é¢æ˜¯æˆ‘åœ¨è±†ç“£ç½‘ä¸Šçœ‹åˆ°çš„ä¸€å¼ åŠ¨ç”»å›¾,è§‰å¾—æŒºæœ‰æ„æ€çš„,äºæ˜¯æˆ‘æ‰“ç®—ç”¨ç¨‹åºå®ç°å®ƒ.æˆ‘ç»™å®ƒå–äº†ä¸€ä¸ªåå­—,è™«å„¿è·‘,ä¸€åªå‹¤å¥‹çš„è™«å­.<br>ã€€ã€€<img src="/images/a-diligent-worm.gif" class="" title="a-diligent-worm"></li>
</ul>
<h1 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h1><h2 id="äº†è§£iOSä¸­å®ç°åŠ¨ç”»çš„æ–¹æ³•"><a href="#äº†è§£iOSä¸­å®ç°åŠ¨ç”»çš„æ–¹æ³•" class="headerlink" title="äº†è§£iOSä¸­å®ç°åŠ¨ç”»çš„æ–¹æ³•"></a>äº†è§£iOSä¸­å®ç°åŠ¨ç”»çš„æ–¹æ³•</h2><p>ã€€ã€€iOSä¸­çš„åŠ¨ç”»ä¸»è¦æœ‰Viewçº§åˆ«,Layerçº§åˆ«.Viewçº§åˆ«åŠ¨ç”»å¯ä»¥åˆ©ç”¨UIViewçš„ç±»ä¸­animationå¼€å¤´çš„ç±»æ–¹æ³•å®ç°,ä½¿ç”¨ç®€å•æ–¹ä¾¿,ä½†æ˜¯æ— æ³•æ“ä½œæ›´å¤šç»†èŠ‚,å®ƒå…¶å®å°±æ˜¯Core Animationçš„å°è£….Layerçº§åˆ«çš„åŠ¨ç”»ç›¸å¯¹äºViewçº§åˆ«æ¥è¯´è¦åº•å±‚ä¸€äº›,ä¸»è¦æ˜¯ä½¿ç”¨Core Animationæ¥å®ç°.ç›¸å…³CAç±»å¦‚ä¸‹å›¾:<br>ã€€ã€€<img src="/images/Core-Animation-Classes.png" class="" title="Core-Animation-Classes"></p>
<blockquote>
<p>CAAnimationï¼šæ ¸å¿ƒåŠ¨ç”»çš„åŸºç¡€ç±»ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œè´Ÿè´£åŠ¨ç”»è¿è¡Œæ—¶é—´ã€é€Ÿåº¦çš„æ§åˆ¶ï¼Œæœ¬èº«å®ç°äº†CAMediaTimingåè®®ã€‚<br>CAPropertyAnimationï¼šå±æ€§åŠ¨ç”»çš„åŸºç±»ï¼ˆé€šè¿‡å±æ€§è¿›è¡ŒåŠ¨ç”»è®¾ç½®ï¼Œæ³¨æ„æ˜¯å¯åŠ¨ç”»å±æ€§ï¼‰ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ã€‚<br>CAAnimationGroupï¼šåŠ¨ç”»ç»„ï¼ŒåŠ¨ç”»ç»„æ˜¯ä¸€ç§ç»„åˆæ¨¡å¼è®¾è®¡ï¼Œå¯ä»¥é€šè¿‡åŠ¨ç”»ç»„æ¥è¿›è¡Œæ‰€æœ‰åŠ¨ç”»è¡Œä¸ºçš„ç»Ÿä¸€æ§åˆ¶ï¼Œç»„ä¸­æ‰€æœ‰åŠ¨ç”»æ•ˆæœå¯ä»¥å¹¶å‘æ‰§è¡Œã€‚<br>CATransitionï¼šè½¬åœºåŠ¨ç”»ï¼Œä¸»è¦é€šè¿‡æ»¤é•œè¿›è¡ŒåŠ¨ç”»æ•ˆæœè®¾ç½®ã€‚<br>CABasicAnimationï¼šåŸºç¡€åŠ¨ç”»ï¼Œé€šè¿‡å±æ€§ä¿®æ”¹è¿›è¡ŒåŠ¨ç”»å‚æ•°æ§åˆ¶ï¼Œåªæœ‰åˆå§‹çŠ¶æ€å’Œç»“æŸçŠ¶æ€ã€‚<br>CAKeyframeAnimationï¼šå…³é”®å¸§åŠ¨ç”»ï¼ŒåŒæ ·æ˜¯é€šè¿‡å±æ€§è¿›è¡ŒåŠ¨ç”»å‚æ•°æ§åˆ¶ï¼Œä½†æ˜¯åŒåŸºç¡€åŠ¨ç”»ä¸åŒçš„æ˜¯å®ƒå¯ä»¥æœ‰å¤šä¸ªçŠ¶æ€æ§åˆ¶ã€‚</p>
</blockquote>
<p>ã€€ã€€æ ¹æ®å®é™…åœºæ™¯,æœ¬æ–‡ä¸»è¦æ˜¯åœ¨CALayerçš„å­ç±»CAShapeLayer(çœ‹åå­—å¾ˆå®¹æ˜“çœ‹å‡ºè¿™æ˜¯ä¸“é—¨ç”¨ä½œå›¾å½¢å¤„ç†çš„å­ç±»)ä¸­åˆ©ç”¨CABasicAnimation, CAAnimationGroupæ¥å®ç°åŠ¨ç”»æ•ˆæœ.æ›´å¤šiOSåŠ¨ç”»çŸ¥è¯†,å¯ä»¥å‚è€ƒæ–‡åçš„<a href="/2016/03/21/iOS-animation-design-of-the-worm-run/#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">é˜…è¯»æ¨è</a><br>ã€€ã€€CABasicAnimationç±»æœ‰å‡ ä¸ªå±æ€§è¦ç‰¹åˆ«ç•™æ„,åˆ†åˆ«æ˜¯fromValueå’ŒtoValue,è¿™ä¸¤ä¸ªåŸºæœ¬å°±æ˜¯CABasicAnimationçš„æ ¸å¿ƒäº†,å…¶ä½™å¤§éƒ¨åˆ†æ˜¯ç»§æ‰¿å­çˆ¶ç±»çš„.è¿™é‡Œè¦é‡ç‚¹æŒ‡å‡ºçš„æ˜¯åˆ›å»ºCABasicAnimationå¯¹è±¡æ—¶å€™è¦æŒ‡å‡ºkeyPath,ç”¨æ¥æŒ‡æ˜åŠ¨ç”»æ˜¯å¹³ç§»ç¼©æ”¾æ—‹è½¬è¿˜æ˜¯ç»˜åˆ¶ç­‰.å…¶ä¸­keyPathå¯ä»¥è®¾ç½®ä¸ºstrokeStart, strokeEnd,è€ŒCAShapeLayerä¹Ÿæœ‰ä¸¤ä¸ªå±æ€§åˆ†åˆ«æ˜¯strokeStart, strokeEnd.ç½‘ä¸Šå¾ˆå¤šæ–‡ç« ä»‹ç»è¿™äº›å±æ€§çš„ä½œç”¨äº†.æˆ‘è¿™é‡Œå°±ä¸é‡å¤æè¿°äº†,æ„Ÿè§‰è¿™ç§ä¸œè¥¿å…‰è‡ªå·±æè¿°çœŸçš„æ˜¯å¾ˆéš¾è¯´æ¸…æ¥š,æˆ‘å‘ç°æœ‰ä¸€ä¸ªç‰¹åˆ«ä¾¿æ·ç›´è§‚çš„æ–¹æ³•,é‚£å°±æ˜¯ä½ åœ¨ä»£ç ä¸­è‡ªå·±æµ‹è¯•è§‚å¯Ÿ.æ‰€ä»¥æˆ‘ç‰¹åˆ«å†™äº†ä¸¤æ®µæµ‹è¯•çš„ä»£ç .å¤§å®¶ä¹Ÿå¯ä»¥åœ¨æˆ‘çš„<a href="/2016/03/21/iOS-animation-design-of-the-worm-run/#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">GitHub</a>ä¸Šæ‰¾åˆ°å¯ä»¥ç›´æ¥è¿è¡Œçš„ä»£ç .</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CAShapeLayer</span> *firstWormShapeLayer = [[<span class="built_in">CAShapeLayer</span> alloc] init];</span><br><span class="line">    firstWormShapeLayer.path = [<span class="keyword">self</span> testPath];</span><br><span class="line">    firstWormShapeLayer.lineWidth = <span class="number">2</span>;</span><br><span class="line">    firstWormShapeLayer.lineCap = kCALineCapRound;</span><br><span class="line">    firstWormShapeLayer.strokeColor = [<span class="built_in">UIColor</span> redColor].CGColor;</span><br><span class="line">    firstWormShapeLayer.fillColor = [<span class="built_in">UIColor</span> clearColor].CGColor;</span><br><span class="line">    firstWormShapeLayer.actions = [[<span class="built_in">NSDictionary</span> alloc] initWithObjectsAndKeys:[<span class="built_in">NSNull</span> null],<span class="string">@&quot;strokeStart&quot;</span>,[<span class="built_in">NSNull</span> null],<span class="string">@&quot;strokeEnd&quot;</span>, <span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//self æ˜¯ä¸€ä¸ªUIViewå¯¹è±¡</span></span><br><span class="line"><span class="comment">//@property (nonatomic,strong) CAShapeLayer *firstWormShapeLayer;</span></span><br><span class="line">[<span class="keyword">self</span>.layer addSublayer:firstWormShapeLayer];</span><br><span class="line"><span class="keyword">self</span>.firstWormShapeLayer = firstWormShapeLayer;</span><br><span class="line">[<span class="keyword">self</span> testAnimation];</span><br><span class="line"> </span><br><span class="line"> <span class="meta">#<span class="meta-keyword">pragma</span> mark - æµ‹è¯•ç”¨</span></span><br><span class="line"> <span class="comment">// ç”Ÿæˆä¸€æ¡ç”¨äºåˆ¶ä½œåŠ¨ç”»çš„è·¯å¾„</span></span><br><span class="line">-(<span class="built_in">CGPathRef</span>)testPath&#123;</span><br><span class="line">    <span class="comment">//ç”»ä¸€ä¸ªåŠåœ†</span></span><br><span class="line">    <span class="built_in">UIBezierPath</span>* wormPath = <span class="built_in">UIBezierPath</span>.bezierPath;</span><br><span class="line">    [wormPath moveToPoint: <span class="built_in">CGPointMake</span>(<span class="number">5</span>,<span class="number">20</span>)];</span><br><span class="line">    [wormPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="number">35</span>, <span class="number">20</span>)];</span><br><span class="line">    <span class="built_in">CGPathRef</span> path = wormPath.CGPath;</span><br><span class="line">    <span class="keyword">return</span> path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å§‹åŠ¨ç”»æ•ˆæœ</span></span><br><span class="line">-(<span class="keyword">void</span>)testAnimation&#123;</span><br><span class="line">    <span class="built_in">CABasicAnimation</span> *strokeStartAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeStart&quot;</span>];</span><br><span class="line">    <span class="comment">//æ—¶é—´å‡½æ•°,ç”¨äºæè¿°åŠ¨ç”»çš„é€Ÿåº¦å’Œæ—¶é—´çš„å…³ç³»,å¯ä»¥å…ˆå¿½ç•¥</span></span><br><span class="line">    strokeStartAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseOut];</span><br><span class="line">    strokeStartAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.2</span>];</span><br><span class="line">    strokeStartAm.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">1</span>];</span><br><span class="line">    <span class="comment">//ä¸€æ¬¡åŠ¨ç”»çš„æ‰§è¡Œæ—¶é—´</span></span><br><span class="line">    strokeStartAm.duration = <span class="number">2</span>;</span><br><span class="line">    <span class="comment">//åŠ¨ç”»é‡å¤æ¬¡æ•°</span></span><br><span class="line">    strokeStartAm.repeatCount = <span class="number">100</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">CABasicAnimation</span> *strokeEndAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeEnd&quot;</span>];</span><br><span class="line">    strokeEndAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">1</span>];</span><br><span class="line">    strokeEndAm.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0</span>];</span><br><span class="line">    strokeEndAm.duration = <span class="number">2</span>;</span><br><span class="line">    strokeEndAm.repeatCount = <span class="number">100</span>;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.firstWormShapeLayer addAnimation:strokeEndAm forKey:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å“ªäº›å·¥å…·å¯ä»¥åˆ©ç”¨"><a href="#å“ªäº›å·¥å…·å¯ä»¥åˆ©ç”¨" class="headerlink" title="å“ªäº›å·¥å…·å¯ä»¥åˆ©ç”¨?"></a>å“ªäº›å·¥å…·å¯ä»¥åˆ©ç”¨?</h2><p>ã€€ã€€è¦å®ç°ä¸€ä¸ªåŠ¨ç”»,æœ€é‡è¦çš„å°±æ˜¯ç¡®å®šåŠ¨ç”»çš„é€Ÿåº¦ä¸æ—¶é—´çš„å…³ç³»,ç¡®å®šåŠ¨ç”»çš„åŸºæœ¬å…ƒç´ .æ¯”å¦‚åŠ¨ç”»çš„åŸºæœ¬å½¢çŠ¶,å­—å½¢,è·¯å¾„ç­‰.è¿™é‡Œæˆ‘æ‰¾åˆ°äº†å‡ ç§ç›¸å½“ä¸é”™çš„å·¥å…·.</p>
<ol>
<li><a href="/2016/03/21/iOS-animation-design-of-the-worm-run/#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">CAMediaTimingFunction playground</a><br>å¯è§†åŒ–è§‚å¯ŸtimingFunctionçš„æ›²çº¿</li>
<li><a href="/2016/03/21/iOS-animation-design-of-the-worm-run/#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">Sketch</a><br>è¿™æ˜¯ä¸€æ¬¾Macä¸Šçš„çŸ¢é‡å›¾ç»˜åˆ¶å·¥å…·,å¯ä»¥åˆ°å¤„SVGæ ¼å¼çš„æ–‡ä»¶</li>
<li><a href="/2016/03/21/iOS-animation-design-of-the-worm-run/#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">PaintCode</a><br>ç”¨äºå°†SVGæ–‡ä»¶è½¬æ¢æˆOCçš„è·¯å¾„ä»£ç (æé†’ä¸€ä¸‹,PaintCodeè¿™ä¸ªè½¯ä»¶åˆ¶ä½œå‡ºæ¥çš„è·¯å¾„ç»˜åˆ¶é¡ºåºå¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„)<br>ã€€ã€€æœ¬æ–‡å°†è¦å®ç°çš„åŠ¨ç”»æ•ˆæœçœ‹ä¸Šå»åƒæ˜¯ä¸€ä¸ªåŠåœ†ğŸ˜†,æ‰€ä»¥åº”è¯¥æ˜¯ç”¨ä¸ä¸Šè·¯å¾„ä»£ç ç”Ÿæˆå·¥å…·.</li>
</ol>
<h2 id="iOSåŠ¨ç”»çš„å‡ ä¸ªé‡è¦æ¦‚å¿µ"><a href="#iOSåŠ¨ç”»çš„å‡ ä¸ªé‡è¦æ¦‚å¿µ" class="headerlink" title="iOSåŠ¨ç”»çš„å‡ ä¸ªé‡è¦æ¦‚å¿µ"></a>iOSåŠ¨ç”»çš„å‡ ä¸ªé‡è¦æ¦‚å¿µ</h2><ol>
<li><p>å…³é”®å¸§ï¼šä¸€ä¸ªåŠ¨ç”»å¯èƒ½æ˜¯å•ä¸€çš„å˜åŒ–,ç­‰æ¯”ä¾‹æ”¾å¤§ç¼©å°,ä¹Ÿå¯èƒ½æ˜¯ç”±å¥½å‡ ä¸ªå˜åŒ–ç»„æˆ,æ¯”å¦‚å…ˆæ”¾å¤§,å†ç¼©å°,å†å¹³ç§».åœ¨iOSåŠ¨ç”»è®¾è®¡ä¸­,ç³»ç»Ÿæä¾›ä¸€äº›è®¾ç½®å…³é”®å¸§æ–¹æ³•,ä½ åªè¦å®šä¹‰å¥½å…³é”®å¸§å’Œå…³é”®å¸§å¸§ä¹‹é—´çš„æ—¶é—´åˆ†é…,ç³»ç»Ÿå°±ä¼šæ ¹æ®å…³é”®å¸§çš„åŒºåˆ«è‡ªåŠ¨è¡¥å…¨è¿‡åº¦å¸§,è¾¾åˆ°ä¸€ä¸ªåŠ¨ç”»æµç•…çš„æ•ˆæœ.</p>
</li>
<li><p>å±‚ï¼š<a href="/2016/03/21/iOS-animation-design-of-the-worm-run/#%E4%BA%86%E8%A7%A3iOS%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%8A%A8%E7%94%BB%E7%9A%84%E6%96%B9%E6%B3%95">4.1å°èŠ‚</a>ä¸­æåˆ°,åœ¨CALayerä¸Šæ‰èƒ½å®ç°æ›´å¤šåŠ¨ç”»çš„ç»†èŠ‚.Viewçš„å±‚æ¦‚å¿µç±»ä¼¼PhotoShopä¸­çš„å›¾å±‚,ä¸€ä¸ªå›¾åƒçš„æœ€ç»ˆæ•ˆæœå¯ä»¥é€šè¿‡å¤šä¸ªå±‚é‡å å®ç°çš„,åŒæ ·çš„ä¸€ä¸ªViewåœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„æ•ˆæœé™¤äº†Viewä¸Šé¢çš„å†…å®¹ä¹‹å¤–,è¿˜æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å› ç´ å°±æ˜¯è¿™ä¸ªViewçš„å±‚é‡Œå†…å®¹.</p>
</li>
<li><p>æ—¶é—´å‡½æ•°ï¼šåŠ¨ç”»æ€»ä¼šåœ¨è®¾å®šçš„æ—¶é—´é•¿åº¦å†…æ‰§è¡Œå®Œ,åœ¨è¿™æ®µæ—¶é—´å†…,åŠ¨ç”»çš„å˜åŒ–æœ‰å¤šå¤§,å˜åŒ–çš„é€Ÿåº¦æœ‰å¤šå¿«,è¿™ä¸»è¦å–å†³äºæ—¶é—´å‡½æ•°.å¦‚æœæ—¶é—´å‡½æ•°æ˜¯çº¿æ€§å‡½æ•°,é‚£è¡¨ç¤ºåŠ¨ç”»çš„å˜åŒ–é€Ÿåº¦åœ¨è¿™ä¸€æ®µæ—¶é—´å†…æ˜¯å‡åŒ€å˜åŒ–çš„.å¦‚æœæ˜¯æ›²çº¿çš„,é‚£åˆæ˜¯å¦ä¸€ç§æ•ˆæœ,ä¸‹é¢ç»™å‡ºç³»ç»Ÿæä¾›çš„5ç§æ—¶é—´å‡½æ•°çš„å‡½æ•°å›¾åƒ,æ–¹ä¾¿å¤§å®¶ç†è§£.</p>
<img src="/images/kCAMediaTimingFunctionLinear.png" class="" title="kCAMediaTimingFunctionLinear">çº¿å‹å‡½æ•°
<img src="/images/kCAMediaTimingFunctionEaseIn.png" class="" title="kCAMediaTimingFunctionEaseIn">ç¼“å…¥
<img src="/images/kCAMediaTimingFunctionEaseOut.png" class="" title="kCAMediaTimingFunctionEaseOut">ç¼“å‡º
<img src="/images/kCAMediaTimingFunctionEaseInEaseOut.png" class="" title="kCAMediaTimingFunctionEaseInEaseOut">æ…¢å…¥æ…¢å‡º
<img src="/images/kCAMediaTimingFunctionDefault.png" class="" title="kCAMediaTimingFunctionDefault">ç³»ç»Ÿé»˜è®¤çš„æ—¶é—´å‡½æ•°
<p>ç³»ç»Ÿè¿˜æä¾›äº†ä¸€ä¸ªè®¾ç½®æ—¶é—´å‡½æ•°çš„æ–¹æ³•[CAMediaTimingFunction functionWithControlPoints::::],å…·ä½“ç”¨æ³•å‚è€ƒ<a target="_blank" rel="noopener" href="http://netcetera.org/camtf-playground.html">CAMediaTimingFunction playground</a></p>
</li>
<li><p>fillModeï¼šå¡«å……æ¨¡å¼æ˜¯CAMediaTimingåè®®é‡Œçš„å±æ€§,æ‰€æœ‰çš„Core AnimationåŠ¨ç”»ç±»éƒ½æœ‰,ç”¨äºæè¿°åœ¨åŠ¨ç”»çš„å‰å,å›¾å±‚è¦å¡«å……çš„å†…å®¹.</p>
</li>
</ol>
<p><strong>kCAFillModeRemoved</strong>ï¼šé»˜è®¤æ˜¯è¿™ä¸ªå±æ€§,åŠ¨ç”»å®Œæˆå,å°±ä»layerä¸­ç§»é™¤äº†.çœ‹åˆ°çš„æ•ˆæœå°±æ˜¯åŠ¨ç”»ç»“æŸå,å†…å®¹å˜æˆäº†æ¨¡å‹å›¾å±‚äº†,è¿™ç»å¸¸å‘ç”Ÿåœ¨ä½ æœ‰å¤šä¸ªåŠ¨ç”»å¯¹è±¡è¦åŒæ—¶æ‰§è¡ŒåŠ¨ç”»,ä½†æ˜¯è¿™äº›å¯¹è±¡çš„æ—¶é—´é•¿åº¦ä¸åŒ,é€ æˆä¸€äº›å¯¹è±¡æ‰§è¡Œå®Œäº†å°±æ˜¾ç¤ºå®Œæ•´å›¾å½¢äº†.<br><strong>kCAFillModeForwards</strong>ï¼šå½“åŠ¨ç”»ç»“æŸå,ä¿ç•™åŠ¨ç”»ç»“æŸæ—¶çš„æ¨¡æ ·.<br><strong>kCAFillModeBackwards</strong>ï¼šåŠ¨ç”»åœ¨å¼€å§‹å‰å°±æ˜¾ç¤ºå‡ºåŠ¨ç”»è¦å¼€å§‹æ—¶çš„æ¨¡æ ·.æ¯”å¦‚ä½ åŠ¨ç”»å»¶è¿Ÿ2ç§’æ‰§è¡Œ,é‚£ä¹ˆåŠ¨ç”»åœ¨æ²¡å¼€å§‹æ‰§è¡Œè¿™æ®µæ—¶é—´çš„æ¨¡æ ·å°±æ˜¯åŠ¨ç”»å¼€å§‹æ‰§è¡Œæ—¶çš„æ ·å­.<br><strong>kCAFillModeBoth</strong>ï¼šåŒæ—¶å…·å¤‡kCAFillModeForwardså’ŒkCAFillModeBackwardsçš„æ•ˆæœ<br>5. åŠ¨ç”»ç»„ï¼š iOSåŠ¨ç”»ä¸­,å¯ä»¥ä½¿ç”¨CAAnimationGroupæ¥å®ç°åŠ¨ç”»ç»„åŠŸèƒ½.åŠ¨ç”»ç»„å¯¹è±¡å¯ä»¥åŠ å…¥å¤šä¸ªåŠ¨ç”»å¯¹è±¡,è¿™äº›åŠ¨ç”»å¯¹è±¡å°†ä¼šåœ¨åŠ¨ç”»ç»„å¼€å§‹æ‰§è¡Œçš„æ—¶å€™åŒæ—¶æ‰§è¡ŒåŠ¨ç”».CAAnimationGroupä¹Ÿæœ‰è‡ªå·±çš„é•¿åº¦,é‡å¤æ¬¡æ•°ç­‰å±æ€§,è¿™äº›å’Œç»„ä¸­çš„æ¯ä¸€ä¸ªåŠ¨ç”»å±æ€§éƒ½ä¸å†²çª.è¿™ä¸ªæ˜¯å¾ˆé‡è¦çš„,ä¸¾ä¸ªä¾‹å­.åŠ¨ç”»å¯¹è±¡Aé•¿åº¦1s,é‡å¤2æ¬¡;åŠ¨ç”»å¯¹è±¡Bé•¿åº¦1.5s,é‡å¤2æ¬¡;åŠ¨ç”»å¯¹è±¡Cæ—¶é—´é•¿åº¦2s,é‡å¤æ¬¡æ•°3æ¬¡;åŠ¨ç”»ç»„G,é•¿åº¦3ç§’,é‡å¤æ— æ•°æ¬¡.ABCåŠ å…¥Gä¸­,æ•ˆæœå°±æ˜¯Gåœ¨æ‰§è¡Œä¸€æ¬¡åŠ¨ç”»æ—¶,Aå¯ä»¥é‡å¤æ‰§è¡Œ2æ¬¡,ç„¶åç©ºé—²1s.Bé‡å¤2æ¬¡,æ²¡æœ‰ç©ºé—².Cæ‰§è¡Œå®Œç¬¬ä¸€æ¬¡,åœ¨é‡å¤ç¬¬äºŒæ¬¡æ—¶æ‰§è¡Œäº†1ç§’å°±æ²¡æ³•ç»§ç»­æ‰§è¡Œäº†,å› ä¸º3ç§’æ—¶é—´ä¸€ä¸ªå‘¨æœŸåˆ°äº†,Gåˆé‡å¤äº†æ•´ä¸ªè¿™ä¸ªåŠ¨ç”»æ•ˆæœ.<br>ã€€ã€€<strong>iOSåŠ¨ç”»è¿˜æœ‰å¾ˆå¤šæ¦‚å¿µå’Œå±æ€§,ç”±äºæœ¬æ–‡è¦å®ç°çš„åŠ¨ç”»æ²¡æœ‰æ¶‰åŠåˆ°,æ‰€ä»¥å°±ä¸è®²è¿°äº†.å…·ä½“çš„å¤§å®¶å¯ä»¥åœ¨æ¨èé˜…è¯»ä¸­ç»§ç»­å­¦ä¹ ,ç„¶åå°è¯•å®ç°æ›´å¤šæ•ˆæœ</strong></p>
<h2 id="æ‹†åˆ†åŠ¨ç”»-ç®€åŒ–æ€è·¯"><a href="#æ‹†åˆ†åŠ¨ç”»-ç®€åŒ–æ€è·¯" class="headerlink" title="æ‹†åˆ†åŠ¨ç”»,ç®€åŒ–æ€è·¯"></a>æ‹†åˆ†åŠ¨ç”»,ç®€åŒ–æ€è·¯</h2><p>ã€€ã€€ä¸åŒçš„æ‹†åˆ†æ€è·¯,å†™å‡ºæ¥çš„ä»£ç ä¹Ÿä¸åŒ,å¦‚æœä¸€å¼€å§‹æ‹†åˆ†å¾—ä¸å¥½,æœ‰å¯èƒ½ä»£ç è¦å¤šå†™å¾ˆå¤š,è€Œä¸”è¿˜ä¸ä¸€å®šèƒ½å®ç°.è§‚å¯Ÿä¸€ä¸‹ä¸Šé¢æä¾›çš„GIFåŠ¨ç”»,æ•´ä¸ªåŠ¨ç”»æ˜¯ç”±ä¸€ä¸ªåŠåœ†å¼§ç»„æˆ,ä¸€å…±æ˜¯ä¸‰ç§é¢œè‰²,çº¢é»„ç»¿è‰².è¿™é‡Œæœ‰å‡ ç§æ€è·¯.<br>ã€€ã€€ä¸€ç§æ˜¯æ•´ä¸ªåŠ¨ç”»ç”±ä¸€ä¸ªlayerç»„æˆ,layerä¸Šç”»ä¸€ä¸ªåŠåœ†å¼§,æŠŠåœ†å¼§åˆ†å±‚ä¸‰æ®µ,åˆ†åˆ«ç”»ä¸Šä¸åŒçš„é¢œè‰².è¦æ³¨æ„çš„æ˜¯åŠ¨ç”»é™¤äº†åœ†å¼§çš„ä¼¸å¼ ç¼©å°å¤–è¿˜æœ‰ä¸€ä¸ªå¹³ç§»è¿åŠ¨.è¿™ç§æ€è·¯çœ‹ä¼¼ç®€å•,ä½†æ˜¯æœ‰ä¸ªåœ°æ–¹ä¸å¥½å®ç°,å°±æ˜¯åŠåœ†å¼§çš„æ‹‰ä¼¸å’Œç¼©å°,é¢œè‰²é•¿åº¦æ¯”ä¾‹è¦ä¿æŒä¸€æ ·.åŠåœ†å¼§å¯ä»¥ä»0ç”»åˆ°å®Œæ•´çš„åŠåœ†å¼§,å†ä»å·¦ç«¯å‘å³ç«¯æ¶ˆå¤±,è¿™ä¸ªå®¹æ˜“å®ç°æ‹‰ä¼¸ç¼©å°æ•ˆæœ,ä½†æ˜¯é¢œè‰²è·Ÿç€æ‹‰ä¼¸ç¼©å°å°±ä¸å¥½åšäº†.<br>ã€€ã€€å¦ä¸€ç§æ€è·¯æ˜¯æ‹†åˆ†åŠ¨ç”»,ç”¨å¤šä¸ªlayerç»„æˆ,ä¹Ÿæ˜¯æœ¬æ–‡æ‰€ä½¿ç”¨çš„æ–¹æ³•.é€šè¿‡æ‹†åˆ†åŠ¨ç”»,å¯ä»¥ç®€åŒ–æ€è·¯å’Œç®—æ³•.è§‚å¯ŸGIF,å¯ä»¥æŠŠåŠ¨ç”»çœ‹æˆä¸‰ä¸ªlayer,æ¯ä¸€ä¸ªlayerå„è‡ªç”»ç€è‡ªå·±çš„åŠåœ†å¼§,çº¢è‰²ä¿ç•™å®Œæ•´å¼§é•¿,å¾®è°ƒé»„è‰²å’Œç»¿è‰²çš„å¯è§å¼§é•¿,å…¶ä¸­ç»¿è‰²æœ€çŸ­.æ³¨æ„ä¸€ä¸‹,ä¸€å¼€æˆ‘ä¹Ÿæ˜¯æŠŠåŸºç¡€å›¾å½¢è®¾å®šä¸ºåŠåœ†å¼§,ä½†æ˜¯åšç€åšç€å‘ç°æ²¡æ³•å®ç°å…ˆå¤´çº¢å°¾ç»¿,æ¥ç€å…ˆç»¿å°¾çº¢è¿™æ ·çš„æ•ˆæœ,æ‰€ä»¥åŸºç¡€å›¾å½¢çš„è®¾å®šæ˜¯éå¸¸é‡è¦çš„,ä¸€å®šè¦è€ƒè™‘æ¸…æ¥š,å¦åˆ™äº‹å€åŠŸåŠ.è¿™é‡Œæˆ‘ä»¬éœ€è¦æŠŠåŸºç¡€å›¾å½¢è®¾å®šæˆæœ‰ä¸¤ä¸ªåŠåœ†å¼§è¿ç€çš„.å¦‚å›¾:</p>
<p>ã€€ã€€<img src="/images/full-worm-red.png" class="" title="full-worm-red"></p>
<p>å·¦åŠåœ†å¼§å¯ä»¥å®ç°å¤´çº¢å°¾ç»¿,å³åŠåœ†å¼§å¯ä»¥å®ç°å…ˆç»¿å°¾çº¢çš„æ•ˆæœ,åŠ¨ç”»è¿‡ç¨‹ä¸­å§‹ç»ˆåªæ˜¾ç¤ºæœ€å¤šä¸€åŠçš„è·¯å¾„(åŠåœ†å¼§).</p>
<h1 id="å¼€å§‹åŠ¨æ‰‹"><a href="#å¼€å§‹åŠ¨æ‰‹" class="headerlink" title="å¼€å§‹åŠ¨æ‰‹"></a>å¼€å§‹åŠ¨æ‰‹</h1><h2 id="å®ç°åŠ¨ç”»çš„æ ¸å¿ƒéƒ¨åˆ†"><a href="#å®ç°åŠ¨ç”»çš„æ ¸å¿ƒéƒ¨åˆ†" class="headerlink" title="å®ç°åŠ¨ç”»çš„æ ¸å¿ƒéƒ¨åˆ†"></a>å®ç°åŠ¨ç”»çš„æ ¸å¿ƒéƒ¨åˆ†</h2><p>æ ¹æ®åŠ¨ç”»çš„æ‹†åˆ†æ€è·¯,å…ˆå®ç°çº¢è‰²éƒ¨åˆ†çš„æ•ˆæœ,å†å åŠ é»„è‰²å’Œç»¿è‰²çš„å›¾å±‚.ä¸‹é¢æ˜¯æ ¸å¿ƒä»£ç å’Œæ³¨é‡Š.<br>CCWormView.h</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºUIViewçš„å­ç±»CCWormView</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CCWormView</span> : <span class="title">UIView</span></span></span><br><span class="line"><span class="comment">//çœç•¥å…¶ä»–ä»£ç </span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>CCWormViewçš„å®ç°</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WORM_ANIMATION_KEY_FIRST @<span class="meta-string">&quot;WORM_ANIMATION_KEY_FIRST&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WORM_ANIMATION_KEY_SECOND @<span class="meta-string">&quot;WORM_ANIMATION_KEY_SECOND&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WORM_ANIMATION_KEY_THIRD @<span class="meta-string">&quot;WORM_ANIMATION_KEY_THIRD&quot;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CCWormView</span> ()</span></span><br><span class="line"><span class="comment">//ç”¨æˆ·å®ç°çº¢è‰²è™«åŠ¨ç”»çš„å±‚</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">CAShapeLayer</span> *firstWormShapeLayer;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CCWormView</span></span></span><br><span class="line"><span class="comment">//çœç•¥å…¶ä»–ä»£ç </span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–å±‚</span></span><br><span class="line">-(<span class="keyword">instancetype</span>)initWithFrame:(<span class="built_in">CGRect</span>)frame HUDStyle:(CCWormHUDStyle)style&#123;</span><br><span class="line">    <span class="built_in">CAShapeLayer</span> *firstWormShapeLayer = [[<span class="built_in">CAShapeLayer</span> alloc] init];</span><br><span class="line">    <span class="comment">//è®¾ç½®åŠ¨ç”»çš„è·¯å¾„</span></span><br><span class="line">    firstWormShapeLayer.path = [<span class="keyword">self</span> wormRunLongPath];</span><br><span class="line">    <span class="comment">//ç”»ç¬”å®½åº¦</span></span><br><span class="line">    firstWormShapeLayer.lineWidth = CCWormHUDLineWidth;</span><br><span class="line">    <span class="comment">//è®¾ç½®çº¿æ®µå¤´å°¾ä¸ºåœ†å½¢</span></span><br><span class="line">    firstWormShapeLayer.lineCap = kCALineCapRound;</span><br><span class="line">    <span class="comment">//è®¾ç½®çº¿æ®µæ‹è§’ç‚¹ä¸ºåœ†å½¢</span></span><br><span class="line">    firstWormShapeLayer.lineJoin = kCALineCapRound;</span><br><span class="line">    <span class="comment">//è®¾ç½®è·¯å¾„ç»˜åˆ¶é¢œè‰²ä¸ºçº¢è‰²</span></span><br><span class="line">    firstWormShapeLayer.strokeColor = [<span class="built_in">UIColor</span> redColor].CGColor;</span><br><span class="line">    <span class="comment">//è®¾ç½®å¡«å……é¢œè‰²ä¸ºé€æ˜</span></span><br><span class="line">    firstWormShapeLayer.fillColor = [<span class="built_in">UIColor</span> clearColor].CGColor;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    firstWormShapeLayer.actions = [[<span class="built_in">NSDictionary</span> alloc] initWithObjectsAndKeys:[<span class="built_in">NSNull</span> null],<span class="string">@&quot;strokeStart&quot;</span>,[<span class="built_in">NSNull</span> null],<span class="string">@&quot;strokeEnd&quot;</span>, <span class="literal">nil</span>];</span><br><span class="line">    <span class="comment">//å°†å…¶åŠ å…¥åˆ°viewçš„layerä¸­.</span></span><br><span class="line">    [<span class="keyword">self</span>.layer addSublayer:firstWormShapeLayer];    </span><br><span class="line">    <span class="keyword">self</span>.firstWormShapeLayer = firstWormShapeLayer;</span><br><span class="line">    <span class="comment">//åŠ¨ç”»éƒ¨åˆ†,ä¸ºCAShapeLayeræ·»åŠ åŠ¨ç”»æ•ˆæœ</span></span><br><span class="line">    [<span class="keyword">self</span> firstWormAnimation];</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="built_in">CGPathRef</span>)wormRunLongPath&#123;</span><br><span class="line">    <span class="comment">//ç¡®å®šè·¯å¾„èµ·ç‚¹ä½ç½®</span></span><br><span class="line">    <span class="built_in">CGPoint</span> center;</span><br><span class="line">    center = <span class="built_in">CGPointMake</span>(<span class="keyword">self</span>.frame.size.width * <span class="number">9</span> / <span class="number">10</span>, <span class="keyword">self</span>.frame.size.height / <span class="number">2</span>);</span><br><span class="line">    <span class="comment">//ä¸¤ä¸ªè¿ç€çš„åŠåœ†</span></span><br><span class="line">    <span class="built_in">CGFloat</span> radius = (CCWormHUDViewWith / <span class="number">2.0</span>) / <span class="number">2.0</span>;</span><br><span class="line">    <span class="built_in">UIBezierPath</span> *wormPath = [<span class="built_in">UIBezierPath</span> bezierPathWithArcCenter:center radius:radius startAngle:M_PI endAngle:<span class="number">2</span> * M_PI clockwise:<span class="literal">YES</span>];</span><br><span class="line">    [wormPath addArcWithCenter:<span class="built_in">CGPointMake</span>(center.x  + radius * <span class="number">2</span>, center.y) radius:radius startAngle:M_PI endAngle:<span class="number">2</span> * M_PI clockwise:<span class="literal">YES</span>];</span><br><span class="line">    <span class="comment">//è¿”å›CGPathRef,å› ä¸ºCAShapeLayerçš„pathå±æ€§ç±»å‹ä¸ºCGPathRef</span></span><br><span class="line">    <span class="built_in">CGPathRef</span> path = wormPath.CGPath;</span><br><span class="line">    <span class="keyword">return</span> path;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯<strong>firstWormAnimation</strong>éƒ¨åˆ†<br><strong>ç¬¬ä¸€æ­¥</strong>ã€€å®ç°çº¢è‰²è™«è¿åŠ¨çš„å‰åŠéƒ¨åˆ†</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///è™«å­æ‹‰ä¼¸</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeEndAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeEnd&quot;</span>];</span><br><span class="line">strokeEndAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span>];</span><br><span class="line"><span class="comment">//fromValue å¼€å§‹ç”»æ—¶å·²ç»å­˜åœ¨çš„éƒ¨åˆ†çš„é‡</span></span><br><span class="line">strokeEndAm.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0</span>];</span><br><span class="line">strokeEndAm.duration = <span class="number">0.75</span>;</span><br><span class="line">strokeEndAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithControlPoints:<span class="number">0.42</span> :<span class="number">0.0</span> :<span class="number">1.0</span> :<span class="number">0.55</span>];</span><br><span class="line"><span class="comment">//åŠ¨ç”»ç»“æŸå,ä¿ç•™ç»“æŸæ—¶çš„æ¨¡æ ·</span></span><br><span class="line">strokeEndAm.fillMode = kCAFillModeForwards;</span><br><span class="line"><span class="comment">//å°†åŠ¨ç”»åŠ å…¥firstWormShapeLayerçš„ä»£ç çœç•¥äº†.</span></span><br></pre></td></tr></table></figure>
<p>å°†CABasicAnimationå¯¹è±¡çš„åŠ¨ç”»å…³é”®è·¯å¾„ä¸º<em>strokeEnd</em>,fromValue=0,toValue=0.5.æ•ˆæœå°±æ˜¯åŠ¨ç”»ä»ç©ºå¼€å§‹ç”»,åˆ°ä¸€åŠè·¯å¾„æ—¶ç»“æŸ,æ•ˆæœå¦‚ä¸‹:</p>
<img src="/images/worm-strokeEndAm1.gif" class="" title="worm-strokeEndAm1">

<p><strong>ç¬¬äºŒæ­¥</strong>ã€€å®ç°çº¢è‰²è™«æ”¶ç¼©çš„åŠ¨ç”»</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è™«å­ç¼©å°</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeStartAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeStart&quot;</span>];</span><br><span class="line">strokeStartAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span>];</span><br><span class="line">strokeStartAm.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0</span>];</span><br><span class="line">strokeStartAm.duration = <span class="number">0.45</span>;</span><br><span class="line"><span class="comment">//å¦‚æœä¸è¢«GroupåŠ å…¥çš„è¯,CACurrentMediaTime() + 0.75 æ‰è¡¨ç¤ºå»¶è¿Ÿ0.75ç§’.</span></span><br><span class="line">strokeStartAm.beginTime = <span class="number">0.75</span>;<span class="comment">//å»¶è¿Ÿä¸€ç§’æ‰§è¡Œ</span></span><br><span class="line">strokeStartAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line">strokeStartAm.fillMode = kCAFillModeForwards;</span><br></pre></td></tr></table></figure>
<p>å°†CABasicAnimationå¯¹è±¡çš„åŠ¨ç”»å…³é”®è·¯å¾„ä¸º<em>strokeStart</em>,fromValue=0,toValue=0.5.æ•ˆæœå°±æ˜¯åŠ¨ç”»å¼€å§‹æ‰§è¡Œæ—¶å°±ä»èµ·ç‚¹ä¹Ÿå°±æ˜¯å·¦ç«¯æ…¢æ…¢æ¶ˆå¤±ç›´åˆ°ä¸€åŠè·¯å¾„çš„ä½ç½®åœæ­¢.è®¾ç½®å»¶è¿Ÿ0.75ç§’çš„ä½œç”¨å°±æ˜¯ç­‰å¾…è™«å­æ‹‰ä¼¸åŠ¨ç”»ç»“æŸ,å†æ‰§è¡Œç¼©å°.æ•ˆæœå¦‚ä¸‹:<br>(æé†’ä¸€ä¸‹,ä¸‹å›¾æ˜¯å•ç‹¬æ‰§è¡Œç¼©å°åŠ¨ç”»,ä¸åŒ…æ‹¬ä¸Šé¢çš„æ‹‰ä¼¸åŠ¨ç”»çš„ç»“æœ,ç”±äºåŠ¨ç”»å»¶è¿Ÿ0.75ç§’,æ‰€ä»¥è¿™0.75ç§’ä¼šæ˜¾ç¤ºå®Œæ•´è·¯å¾„,ç»“åˆæ‹‰ä¼¸åŠ¨ç”»æ•ˆæœå°±æ­£å¸¸äº†)</p>
<img src="/images/worm-strokeStartAm1.gif" class="" title="worm-strokeStartAm1">
<p>å°†ç¬¬ä¸€äºŒæ­¥åŠ¨ç”»æ”¾å…¥ä¸€ä¸ªç»„é‡ŒåŒæ—¶æ‰§è¡Œ,çœ‹çœ‹æ•ˆæœ</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CAAnimationGroup</span> *animationGroup = [<span class="built_in">CAAnimationGroup</span> animation];</span><br><span class="line">animationGroup.animations = [<span class="built_in">NSArray</span> arrayWithObjects: strokeEndAm, strokeStartAm, <span class="literal">nil</span>];</span><br><span class="line">animationGroup.repeatCount = HUGE_VALF;</span><br><span class="line"><span class="comment">//åŠ¨ç”»æ€»æ—¶é—´åº”è¯¥ä»¥ç»„ä¸­åŠ¨ç”»æ—¶é—´æœ€é•¿ä¸ºæ ‡å‡†</span></span><br><span class="line">animationGroup.duration = WormRunTime * <span class="number">2</span>;</span><br><span class="line">[<span class="keyword">self</span>.firstWormShapeLayer addAnimation:animationGroup forKey:WORM_ANIMATION_KEY_FIRST];</span><br></pre></td></tr></table></figure>
<img src="/images/worm-strokeEndAm1-strokeStartAm1.gif" class="" title="worm-strokeEndAm1-strokeStartAm1">

<p><strong>ç¬¬ä¸‰æ­¥</strong>ã€€å®ç°è™«å­ç¬¬äºŒé˜¶æ®µçš„æ‹‰ä¼¸</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è™«å­æ‹‰ä¼¸2</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeEndAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeEnd&quot;</span>];</span><br><span class="line">strokeEndAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span> + <span class="number">0.5</span>];</span><br><span class="line"><span class="comment">//fromValue å¼€å§‹ç”»æ—¶å·²ç»å­˜åœ¨çš„éƒ¨åˆ†çš„é‡</span></span><br><span class="line">strokeEndAm2.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span> + <span class="number">0</span>];</span><br><span class="line">strokeEndAm2.duration = <span class="number">0.75</span>;</span><br><span class="line">strokeEndAm2.beginTime = <span class="number">1.2</span>;</span><br><span class="line">strokeEndAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithControlPoints:<span class="number">0.42</span> :<span class="number">0.0</span> :<span class="number">1.0</span> :<span class="number">0.55</span>];</span><br><span class="line">strokeEndAm2.fillMode = kCAFillModeForwards;</span><br></pre></td></tr></table></figure>
<p>è™«å­ç¬¬äºŒé˜¶æ®µçš„æ‹‰ä¼¸å’Œç¬¬ä¸€é˜¶æ®µåŸºæœ¬ä¸€æ ·,éœ€è¦æ”¹å˜çš„æ˜¯toValue,fromValueçš„å€¼,è¿˜æœ‰åŠ¨ç”»çš„å¼€å§‹æ—¶é—´å¿…é¡»æ˜¯ç¬¬ä¸€é˜¶æ®µç»“æŸåç«‹å³æ‰§è¡Œ,ä¸€å…±æ˜¯å»¶è¿Ÿ1.2s,çœ‹çœ‹æ•ˆæœ.</p>
<img src="/images/worm-strokeEndAm2.gif" class="" title="worm-strokeEndAm2">

<p><strong>ç¬¬å››æ­¥</strong>ã€€å®ç°è™«å­ç¬¬äºŒé˜¶æ®µçš„ç¼©å°</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è™«å­ç¼©å°2</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeStartAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeStart&quot;</span>];</span><br><span class="line">strokeStartAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span> + <span class="number">0.5</span>];</span><br><span class="line">strokeStartAm2.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span> + <span class="number">0</span>];</span><br><span class="line">strokeStartAm2.duration = <span class="number">0.45</span>;</span><br><span class="line">strokeStartAm2.beginTime = <span class="number">0.75</span> + <span class="number">1.2</span>;<span class="comment">//å»¶è¿Ÿä¸€ç§’æ‰§è¡Œ</span></span><br><span class="line">strokeStartAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br></pre></td></tr></table></figure>
<p>å’Œç¬¬ä¸€é˜¶æ®µç±»ä¼¼,çœ‹çœ‹æ•ˆæœ.</p>
<img src="/images/worm-strokeStartAm2.gif" class="" title="worm-strokeStartAm2">
<p>ç°åœ¨æŠŠå‰å››æ­¥éƒ½æ”¾å…¥ç»„ä¸­åŒæ—¶è¿›è¡Œ,çœ‹çœ‹æ•ˆæœ.</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">animationGroup.animations = [<span class="built_in">NSArray</span> arrayWithObjects: strokeStartAm, strokeEndAm, strokeEndAm2, strokeStartAm2, <span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<img src="/images/worm-strokeEndAm1&2-strokeStartAm1&2.gif" class="" title="worm-strokeEndAm1&amp;2-strokeStartAm1&amp;2">

<p><strong>ç¬¬äº”æ­¥</strong>ã€€å®ç°è™«å­æŒç»­ç§»åŠ¨çš„æ•ˆæœ</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¹³ç§»åŠ¨ç”»</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *xTranslationAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;transform.translation.x&quot;</span>];</span><br><span class="line">xTranslationAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat: (<span class="number">40</span> / <span class="number">-1.0</span>)];</span><br><span class="line">xTranslationAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseOut];</span><br><span class="line">xTranslationAm.duration = <span class="number">1.18</span>;</span><br><span class="line">xTranslationAm.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *xTranslationAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;transform.translation.x&quot;</span>];</span><br><span class="line">xTranslationAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat: (<span class="number">40</span> / <span class="number">-1.0</span>) * <span class="number">2</span>];</span><br><span class="line">xTranslationAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseOut];</span><br><span class="line">xTranslationAm2.duration = <span class="number">1.18</span>;</span><br><span class="line">xTranslationAm2.beginTime = <span class="number">1.20</span>;</span><br><span class="line">xTranslationAm2.fillMode = kCAFillModeForwards;</span><br></pre></td></tr></table></figure>
<p>æŒç»­ç§»åŠ¨å¯ä»¥æ²¿xè½´å¹³ç§»æ¥å®ç°,å¹³ç§»è¦åˆ†ä¸¤éƒ¨åˆ†,ç¬¬ä¸€é˜¶æ®µç§»åŠ¨ç»“æŸåç¨å¾®åœç•™ä¸€ä¸‹,å†ç»§ç»­ç¬¬äºŒé˜¶æ®µçš„ç§»åŠ¨.æ¯ä¸€ä¸ªé˜¶æ®µçš„ç§»åŠ¨åœç•™æ—¶é—´å’Œè™«å­æ‹‰ä¼¸ç¼©å°æ€»æ—¶é•¿ä¸€æ ·.å°†å¹³ç§»å’Œä¸Šé¢å››æ­¥åŠ¨ç”»ç»“åˆ,çœ‹çœ‹æ•ˆæœ</p>
<img src="/images/worm-strokeEndAm1&2-strokeStartAm1&2-translation.x.gif" class="" title="worm-strokeEndAm1&amp;2-strokeStartAm1&amp;2-translation.x">
<p>è¿™æ ·,çº¢è‰²è™«çš„åŠ¨ç”»æ•ˆæœåŸºæœ¬å°±å®ç°äº†.</p>
<h2 id="æ•´åˆåŠ¨ç”»å®ç°æœ€ç»ˆæ•ˆæœ"><a href="#æ•´åˆåŠ¨ç”»å®ç°æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æ•´åˆåŠ¨ç”»å®ç°æœ€ç»ˆæ•ˆæœ"></a>æ•´åˆåŠ¨ç”»å®ç°æœ€ç»ˆæ•ˆæœ</h2><p>ã€€ã€€ç°åœ¨è¿˜å·®é»„è‰²å’Œç»¿è‰²éƒ¨åˆ†çš„åŠ¨ç”».é‚£ä¹ˆæ€ä¹ˆå®ç°é»„è‰²éƒ¨åˆ†?æ³¨æ„è§‚å¯Ÿ,å¦‚æœè™«å­åœ¨æ‹‰ä¼¸è¿˜æ²¡ç»“æŸçš„æ—¶å€™å°±å¼€å§‹ç¼©å°,æ˜¯ä¸æ˜¯æ•ˆæœå°±æ˜¯é»„è‰²é‚£æ ·ğŸ˜‹!å¦‚æœé»„è‰²æ‹‰ä¼¸æ—¶é—´æ¯”çº¢è‰²æ…¢,å…¶ä»–æ—¶é—´æ¯”ä¾‹éƒ½ä¸å˜,æ˜¯ä¸æ˜¯å¯ä»¥å®ç°çº¢è‰²å…ˆèµ°éšåæ‹‰åŠ¨é»„è‰²å‘¢?ç­”æ¡ˆæ˜¯è‚¯å®šçš„.<br>ã€€ã€€é»„è‰²å’Œç»¿è‰²çš„åŠ¨ç”»é€»è¾‘å’Œçº¢è‰²æ˜¯ä¸€æ¨¡ä¸€æ ·çš„,ä¸åŒçš„å°±æ˜¯åŠ¨ç”»çš„å‚æ•°è®¾ç½®ä¸åŒ,ä¸‹é¢ç»™å‡ºé»„è‰²å’Œç»¿è‰²çš„å‚æ•°.<br>å…ˆçœ‹çœ‹é»„è‰²è™«å­çš„å‚æ•°è®¾ç½®.</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è™«å­æ‹‰ä¼¸</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeEndAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeEnd&quot;</span>];</span><br><span class="line">strokeEndAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span>];</span><br><span class="line"><span class="comment">//fromValue å¼€å§‹ç”»æ—¶å·²ç»å­˜åœ¨çš„éƒ¨åˆ†çš„é‡</span></span><br><span class="line">strokeEndAm.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.010</span>];</span><br><span class="line">strokeEndAm.duration = <span class="number">0.75</span>;</span><br><span class="line">strokeEndAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithControlPoints:<span class="number">0.42</span> :<span class="number">0.0</span> :<span class="number">1.0</span> :<span class="number">0.55</span>];</span><br><span class="line">strokeEndAm.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è™«å­ç¼©å°</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeStartAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeStart&quot;</span>];</span><br><span class="line">strokeStartAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.490</span>];</span><br><span class="line">strokeStartAm.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0</span>];</span><br><span class="line">strokeStartAm.duration = <span class="number">0.70</span>;</span><br><span class="line">strokeStartAm.beginTime = <span class="number">0.50</span>;</span><br><span class="line">strokeStartAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line">strokeStartAm.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è™«å­æ‹‰ä¼¸2 æ‹‰ä¼¸çš„ç¬¬äºŒé˜¶æ®µ,å¿…é¡»è®©ä¸Šä¸€å±‚çš„ç¬¬äºŒé˜¶æ®µå…ˆåŠ¨</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeEndAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeEnd&quot;</span>];</span><br><span class="line">strokeEndAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span> + <span class="number">0.5</span>];</span><br><span class="line"><span class="comment">//fromValue å¼€å§‹ç”»æ—¶å·²ç»å­˜åœ¨çš„éƒ¨åˆ†çš„é‡</span></span><br><span class="line">strokeEndAm2.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span>];</span><br><span class="line">strokeEndAm2.duration = <span class="number">0.75</span>;</span><br><span class="line">strokeEndAm2.beginTime = <span class="number">1.2</span> + <span class="number">0.15</span>;</span><br><span class="line">strokeEndAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithControlPoints:<span class="number">0.42</span> :<span class="number">0.0</span> :<span class="number">1.0</span> :<span class="number">0.55</span>];</span><br><span class="line">strokeEndAm2.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è™«å­ç¼©å°2</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeStartAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeStart&quot;</span>];</span><br><span class="line">strokeStartAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span> + <span class="number">0.5</span>];</span><br><span class="line">strokeStartAm2.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span> + <span class="number">0</span>];</span><br><span class="line">strokeStartAm2.duration = <span class="number">0.30</span>;</span><br><span class="line">strokeStartAm2.beginTime =<span class="number">0.15</span> + <span class="number">0.75</span> + <span class="number">1.2</span>;</span><br><span class="line">strokeStartAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹³ç§»åŠ¨ç”»</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *xTranslationAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;transform.translation.x&quot;</span>];</span><br><span class="line">xTranslationAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat: (<span class="number">40</span> / <span class="number">-1.0</span>)];</span><br><span class="line">xTranslationAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseOut];</span><br><span class="line">xTranslationAm.duration = <span class="number">1.18</span>;</span><br><span class="line">xTranslationAm.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *xTranslationAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;transform.translation.x&quot;</span>];</span><br><span class="line">xTranslationAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat: (<span class="number">40</span> / <span class="number">-1.0</span>) * <span class="number">2</span>];</span><br><span class="line">xTranslationAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseOut];</span><br><span class="line">xTranslationAm2.duration = <span class="number">1.18</span>;</span><br><span class="line">xTranslationAm2.beginTime = <span class="number">1.20</span>;</span><br><span class="line">xTranslationAm2.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">CAAnimationGroup</span> *animationGroup = [<span class="built_in">CAAnimationGroup</span> animation];</span><br><span class="line">animationGroup.animations = [<span class="built_in">NSArray</span> arrayWithObjects: strokeStartAm, strokeEndAm, xTranslationAm, strokeEndAm2, strokeStartAm2, xTranslationAm2, <span class="literal">nil</span>];</span><br><span class="line">animationGroup.repeatCount = HUGE_VALF;</span><br><span class="line"><span class="comment">//åŠ¨ç”»æ€»æ—¶é—´åº”è¯¥ä»¥ç»„ä¸­åŠ¨ç”»æ—¶é—´æœ€é•¿ä¸ºæ ‡å‡†</span></span><br><span class="line">animationGroup.duration = <span class="number">1.2</span> * <span class="number">2</span>;</span><br><span class="line">[<span class="keyword">self</span>.secondWormShapeLayer addAnimation:animationGroup forKey:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p>å°†é»„è‰²å’Œçº¢è‰²ä¸¤ä¸ªå±‚åˆå¹¶åœ¨ä¸€èµ·åŒæ—¶æ‰§è¡ŒåŠ¨ç”»,çœ‹çœ‹æ•ˆæœ</p>
<img src="/images/worm-first&secondLayer.gif" class="" title="worm-first&amp;secondLayer">

<p>ä¸‹é¢æ˜¯ç»¿è‰²è™«å­çš„å‚æ•°.</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è™«å­æ‹‰ä¼¸</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeEndAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeEnd&quot;</span>];</span><br><span class="line">strokeEndAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span>];</span><br><span class="line"><span class="comment">//fromValue å¼€å§‹ç”»æ—¶å·²ç»å­˜åœ¨çš„éƒ¨åˆ†çš„é‡</span></span><br><span class="line">strokeEndAm.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.010</span>];</span><br><span class="line">strokeEndAm.duration = <span class="number">0.75</span>;</span><br><span class="line">strokeEndAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithControlPoints:<span class="number">0.42</span> :<span class="number">0.0</span> :<span class="number">1.0</span> :<span class="number">0.55</span>];</span><br><span class="line">strokeEndAm.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è™«å­ç¼©å°</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeStartAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeStart&quot;</span>];</span><br><span class="line">strokeStartAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.490</span> ];</span><br><span class="line">strokeStartAm.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0</span>];</span><br><span class="line">strokeStartAm.duration = <span class="number">0.90</span>;</span><br><span class="line">strokeStartAm.beginTime = <span class="number">0.25</span>;</span><br><span class="line">strokeStartAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line">strokeStartAm.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è™«å­æ‹‰ä¼¸2 æ‹‰ä¼¸çš„ç¬¬äºŒé˜¶æ®µ,å¿…é¡»è®©ä¸Šä¸€å±‚çš„ç¬¬äºŒé˜¶æ®µå…ˆåŠ¨</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeEndAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeEnd&quot;</span>];</span><br><span class="line">strokeEndAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span> + <span class="number">0.5</span>];</span><br><span class="line"><span class="comment">//fromValue å¼€å§‹ç”»æ—¶å·²ç»å­˜åœ¨çš„éƒ¨åˆ†çš„é‡</span></span><br><span class="line">strokeEndAm2.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span>];</span><br><span class="line">strokeEndAm2.duration = <span class="number">0.75</span>;</span><br><span class="line">strokeEndAm2.beginTime = <span class="number">1.2</span> + <span class="number">0.15</span> + <span class="number">0.20</span>;</span><br><span class="line">strokeEndAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithControlPoints:<span class="number">0.42</span> :<span class="number">0.0</span> :<span class="number">1.0</span> :<span class="number">0.55</span>];</span><br><span class="line">strokeEndAm2.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è™«å­ç¼©å°2</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *strokeStartAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeStart&quot;</span>];</span><br><span class="line">strokeStartAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span> + <span class="number">0.5</span>];</span><br><span class="line">strokeStartAm2.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.5</span> + <span class="number">0</span>];</span><br><span class="line">strokeStartAm2.duration = <span class="number">0.30</span>;</span><br><span class="line">strokeStartAm2.beginTime =<span class="number">0.15</span> + <span class="number">0.75</span> + <span class="number">1.2</span>;</span><br><span class="line">strokeStartAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹³ç§»åŠ¨ç”»</span></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *xTranslationAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;transform.translation.x&quot;</span>];</span><br><span class="line">xTranslationAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat: (HUDWith / <span class="number">-1.0</span> + <span class="number">10</span>)];</span><br><span class="line">xTranslationAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseOut];</span><br><span class="line">xTranslationAm.duration = <span class="number">1.18</span>;</span><br><span class="line">xTranslationAm.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"><span class="built_in">CABasicAnimation</span> *xTranslationAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;transform.translation.x&quot;</span>];</span><br><span class="line">xTranslationAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat: (HUDWith / <span class="number">-1.0</span> + <span class="number">10</span>) * <span class="number">2</span>];</span><br><span class="line">xTranslationAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseOut];</span><br><span class="line">xTranslationAm2.duration = <span class="number">1.18</span>;</span><br><span class="line">xTranslationAm2.beginTime = <span class="number">1.20</span>;</span><br><span class="line">xTranslationAm2.fillMode = kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">CAAnimationGroup</span> *animationGroup = [<span class="built_in">CAAnimationGroup</span> animation];</span><br><span class="line">animationGroup.animations = [<span class="built_in">NSArray</span> arrayWithObjects: strokeStartAm, strokeEndAm, xTranslationAm, strokeEndAm2, strokeStartAm2, xTranslationAm2, <span class="literal">nil</span>];</span><br><span class="line">animationGroup.repeatCount = HUGE_VALF;</span><br><span class="line"><span class="comment">//åŠ¨ç”»æ€»æ—¶é—´åº”è¯¥ä»¥ç»„ä¸­åŠ¨ç”»æ—¶é—´æœ€é•¿ä¸ºæ ‡å‡†</span></span><br><span class="line">animationGroup.duration = <span class="number">1.2</span> * <span class="number">2</span>;</span><br><span class="line">[<span class="keyword">self</span>.thirdWormShapeLayer addAnimation:animationGroup forKey:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆå°†çº¢é»„ç»¿ä¸‰ä¸ªè™«å­åˆå¹¶,çœ‹çœ‹åˆæˆçš„æ•ˆæœğŸ˜„</p>
<img src="/images/worm-first&second&thirdLayer.gif" class="" title="worm-first&amp;second&amp;thirdLayer">
<p>ã€€ã€€.</p>
<h2 id="ä¼˜åŒ–ä»£ç -å®ç°HUDçš„åŠŸèƒ½"><a href="#ä¼˜åŒ–ä»£ç -å®ç°HUDçš„åŠŸèƒ½" class="headerlink" title="ä¼˜åŒ–ä»£ç ,å®ç°HUDçš„åŠŸèƒ½"></a>ä¼˜åŒ–ä»£ç ,å®ç°HUDçš„åŠŸèƒ½</h2><p>ã€€ã€€ä¸‰ä¸ªè™«å­çš„åŠ¨ç”»é€»è¾‘éƒ½æ˜¯ä¸€ä¸‹çš„,æ‰€ä»¥è¿™é‡Œå¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ä»£ç ç»“æ„,æœ€ååŠ ä¸ŠUIViewåŠ¨ç”»,å®ç°ä¸€ä¸ªæŒ‡ç¤ºå™¨(HUD),è¿™æ ·å°±å¯ä»¥æä¾›ç»™åˆ«äººä½¿ç”¨äº†~<br>ã€€ã€€å…ˆæŠŠè™«å­åŠ¨ç”»ä¸­å˜åŒ–çš„å‚æ•°æå–å‡ºæ¥,å°è£…åœ¨ä¸€ä¸ªæ–¹æ³•é‡Œ,ç„¶åä¸‰ä¸ªè™«åˆ†åˆ«ç»™å‡ºè‡ªå·±çš„å‚æ•°è°ƒç”¨ä¸€ä¸‹æ–¹æ³•å°±å¯ä»¥å¾—åˆ°åŠ¨ç”»å¯¹è±¡äº†.å°è£…åçš„ä»£ç å¦‚ä¸‹.(å…¶ä¸­æœ‰ä¸€äº›æ˜¯å…¨å±€é™æ€å˜é‡å’Œå®å®šä¹‰,ä¸ç”¨å¤ªåœ¨æ„,å…·ä½“å¯å‚è€ƒGitä¸Šçš„å®Œæ•´æºç )</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ç¬¬ä¸‰æ¡è™«å­åš…åŠ¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>)thirdWormAnimation&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">CAAnimationGroup</span> *animationGroup = [<span class="keyword">self</span> baseWormAnimationWithEnd1From:<span class="number">0.010</span> end1To:<span class="number">0.5</span> end1Duration:<span class="number">0.75</span> start1From:<span class="number">0</span> start1To:<span class="number">0.490</span> start1Duration:<span class="number">0.9</span> start1Begin:<span class="number">0.25</span> end2From:<span class="number">0.5</span> end2To:<span class="number">0.5</span> + <span class="number">0.5</span> end2Duration:<span class="number">0.75</span> end2Begin:WormRunTime + <span class="number">0.15</span> + <span class="number">0.20</span> start2From:<span class="number">0.5</span> start2To:<span class="number">0.5</span> + <span class="number">0.5</span> start2Duration:<span class="number">0.30</span> start2Begin:<span class="number">0.15</span> + <span class="number">0.75</span> + WormRunTime];</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.thirdWormShapeLayer addAnimation:animationGroup forKey:WORM_ANIMATION_KEY_THIRD];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ç¬¬äºŒæ¡è™«å­åš…åŠ¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>)secondWormAnimation&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">CAAnimationGroup</span> *animationGroup = [<span class="keyword">self</span> baseWormAnimationWithEnd1From:<span class="number">0.010</span> end1To:<span class="number">0.5</span> end1Duration:<span class="number">0.75</span> start1From:<span class="number">0</span> start1To:<span class="number">0.490</span> start1Duration:<span class="number">0.70</span> start1Begin:<span class="number">0.50</span> end2From:<span class="number">0.5</span> end2To:<span class="number">0.5</span> + <span class="number">0.5</span> end2Duration:<span class="number">0.75</span> end2Begin:WormRunTime + <span class="number">0.15</span> start2From:<span class="number">0.5</span> start2To:<span class="number">0.5</span> + <span class="number">0.5</span> start2Duration:<span class="number">0.30</span> start2Begin:<span class="number">0.15</span> + <span class="number">0.75</span> + WormRunTime];</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.secondWormShapeLayer addAnimation:animationGroup forKey:WORM_ANIMATION_KEY_SECOND];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ç¬¬ä¸€æ¡è™«å­åš…åŠ¨ (æœ€åº•éƒ¨çš„é‚£æ¡)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>)firstWormAnimation&#123;</span><br><span class="line">    <span class="built_in">CAAnimationGroup</span> *animationGroup = [<span class="keyword">self</span> baseWormAnimationWithEnd1From:<span class="number">0</span> end1To:<span class="number">0.5</span> end1Duration:<span class="number">0.75</span> start1From:<span class="number">0</span> start1To:<span class="number">0.5</span> start1Duration:<span class="number">0.45</span> start1Begin:<span class="number">0.75</span> end2From:<span class="number">0.5</span> end2To:<span class="number">0.5</span> + <span class="number">0.5</span> end2Duration:<span class="number">0.75</span> end2Begin:<span class="number">1.2</span> start2From:<span class="number">0.5</span> start2To:<span class="number">0.5</span> + <span class="number">0.5</span> start2Duration:<span class="number">0.45</span> start2Begin:<span class="number">0.75</span> + WormRunTime];</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.firstWormShapeLayer addAnimation:animationGroup forKey:WORM_ANIMATION_KEY_FIRST];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="built_in">CAAnimationGroup</span> *)baseWormAnimationWithEnd1From:(<span class="built_in">CGFloat</span>)end1FromValue end1To:(<span class="built_in">CGFloat</span>)end1ToValue end1Duration:(<span class="built_in">CGFloat</span>)end1Duration start1From:(<span class="built_in">CGFloat</span>)start1FromValue start1To:(<span class="built_in">CGFloat</span>)start1ToValue start1Duration:(<span class="built_in">CGFloat</span>)start1Duration start1Begin:(<span class="built_in">CGFloat</span>)start1BeginTime end2From:(<span class="built_in">CGFloat</span>)end2FromValue end2To:(<span class="built_in">CGFloat</span>)end2ToValue end2Duration:(<span class="built_in">CGFloat</span>)end2Duration end2Begin:(<span class="built_in">CGFloat</span>)end2BeginTime start2From:(<span class="built_in">CGFloat</span>)start2FromValue start2To:(<span class="built_in">CGFloat</span>)start2ToValue start2Duration:(<span class="built_in">CGFloat</span>)start2Duration start2Begin:(<span class="built_in">CGFloat</span>)start2BeginTime&#123;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è™«å­æ‹‰ä¼¸1</span></span><br><span class="line">    <span class="built_in">CABasicAnimation</span> *strokeEndAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeEnd&quot;</span>];</span><br><span class="line">    strokeEndAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:end1ToValue];</span><br><span class="line">    <span class="comment">//fromValue å¼€å§‹ç”»æ—¶å·²ç»å­˜åœ¨çš„éƒ¨åˆ†çš„é‡</span></span><br><span class="line">    strokeEndAm.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:end1FromValue];</span><br><span class="line">    strokeEndAm.duration = end1Duration;</span><br><span class="line">    strokeEndAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithControlPoints:<span class="number">0.42</span> :<span class="number">0.0</span> :<span class="number">1.0</span> :<span class="number">0.55</span>];</span><br><span class="line">    strokeEndAm.fillMode = kCAFillModeForwards;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è™«å­ç¼©å°1</span></span><br><span class="line">    <span class="built_in">CABasicAnimation</span> *strokeStartAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeStart&quot;</span>];</span><br><span class="line">    strokeStartAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:start1ToValue];</span><br><span class="line">    strokeStartAm.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:start1FromValue];</span><br><span class="line">    strokeStartAm.duration = start1Duration;</span><br><span class="line">    <span class="comment">//å¦‚æœä¸è¢«GroupåŠ å…¥çš„è¯,CACurrentMediaTime() + 1 æ‰è¡¨ç¤ºå»¶è¿Ÿ1ç§’.</span></span><br><span class="line">    strokeStartAm.beginTime = start1BeginTime;<span class="comment">//å»¶è¿Ÿæ‰§è¡Œ</span></span><br><span class="line">    strokeStartAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line">    strokeStartAm.fillMode = kCAFillModeForwards;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è™«å­æ‹‰ä¼¸2 æ‹‰ä¼¸çš„ç¬¬äºŒé˜¶æ®µ,å¿…é¡»è®©ä¸Šä¸€å±‚çš„ç¬¬äºŒé˜¶æ®µå…ˆåŠ¨</span></span><br><span class="line">    <span class="built_in">CABasicAnimation</span> *strokeEndAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeEnd&quot;</span>];</span><br><span class="line">    strokeEndAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:end2ToValue];</span><br><span class="line">    <span class="comment">//fromValue å¼€å§‹ç”»æ—¶å·²ç»å­˜åœ¨çš„éƒ¨åˆ†çš„é‡</span></span><br><span class="line">    strokeEndAm2.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:end2FromValue];</span><br><span class="line">    strokeEndAm2.duration = end2Duration;</span><br><span class="line">    strokeEndAm2.beginTime = end2BeginTime;</span><br><span class="line">    strokeEndAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithControlPoints:<span class="number">0.42</span> :<span class="number">0.0</span> :<span class="number">1.0</span> :<span class="number">0.55</span>];</span><br><span class="line">    strokeEndAm2.fillMode = kCAFillModeForwards;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è™«å­ç¼©å°2</span></span><br><span class="line">    <span class="built_in">CABasicAnimation</span> *strokeStartAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;strokeStart&quot;</span>];</span><br><span class="line">    strokeStartAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat:start2ToValue];</span><br><span class="line">    strokeStartAm2.fromValue = [<span class="built_in">NSNumber</span> numberWithFloat:start2FromValue];</span><br><span class="line">    strokeStartAm2.duration = start2Duration;</span><br><span class="line">    <span class="comment">//å¦‚æœä¸è¢«GroupåŠ å…¥çš„è¯,CACurrentMediaTime() + 1 æ‰è¡¨ç¤ºå»¶è¿Ÿ1ç§’.</span></span><br><span class="line">    strokeStartAm2.beginTime = start2BeginTime;<span class="comment">//å»¶è¿Ÿä¸€ç§’æ‰§è¡Œ</span></span><br><span class="line">    strokeStartAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å¹³ç§»åŠ¨ç”»</span></span><br><span class="line">    <span class="built_in">CABasicAnimation</span> *xTranslationAm = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;transform.translation.x&quot;</span>];</span><br><span class="line">    xTranslationAm.toValue = [<span class="built_in">NSNumber</span> numberWithFloat: ( (CCWormHUDViewWith / <span class="number">2.0</span>) / <span class="number">-1.0</span>)];</span><br><span class="line">    xTranslationAm.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseOut];</span><br><span class="line">    xTranslationAm.duration = <span class="number">1.18</span>;</span><br><span class="line">    xTranslationAm.fillMode = kCAFillModeForwards;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">CABasicAnimation</span> *xTranslationAm2 = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath:<span class="string">@&quot;transform.translation.x&quot;</span>];</span><br><span class="line">    xTranslationAm2.toValue = [<span class="built_in">NSNumber</span> numberWithFloat: ( (CCWormHUDViewWith / <span class="number">2.0</span>) / <span class="number">-1.0</span>) * <span class="number">2</span>];</span><br><span class="line">    xTranslationAm2.timingFunction = [<span class="built_in">CAMediaTimingFunction</span> functionWithName:kCAMediaTimingFunctionEaseOut];</span><br><span class="line">    xTranslationAm2.duration = <span class="number">1.18</span>;</span><br><span class="line">    xTranslationAm2.beginTime = <span class="number">1.20</span>;</span><br><span class="line">    xTranslationAm2.fillMode = kCAFillModeForwards;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">CAAnimationGroup</span> *animationGroup = [<span class="built_in">CAAnimationGroup</span> animation];</span><br><span class="line">    animationGroup.animations = [<span class="built_in">NSArray</span> arrayWithObjects: strokeStartAm, strokeEndAm, xTranslationAm, strokeEndAm2, strokeStartAm2, xTranslationAm2, <span class="literal">nil</span>];</span><br><span class="line">    animationGroup.repeatCount = HUGE_VALF;</span><br><span class="line">    <span class="comment">//åŠ¨ç”»æ€»æ—¶é—´åº”è¯¥ä»¥ç»„ä¸­åŠ¨ç”»æ—¶é—´æœ€é•¿ä¸ºæ ‡å‡†</span></span><br><span class="line">    animationGroup.duration = WormRunTime * <span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> animationGroup;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ¥ä¸‹æ¥ä¸ºè¿™ä¸ªåŠ¨ç”»æ‰€åœ¨çš„è§†å›¾æ·»åŠ UIViewçº§åˆ«åŠ¨ç”»,åšæˆä¸€ä¸ªHUD,å¹¶ä¸”æä¾›ä¸¤ä¸ªå…¬å¼€çš„å®ä¾‹æ–¹æ³•ç”¨äºæ˜¾ç¤ºå’Œéšè—HUD</strong><br>ã€€ã€€è®²äº†åŠå¤©Core AnimationåŠ¨ç”»,ä¸çŸ¥é“ä½ æ˜¯ä¸æ˜¯ç´¯äº†.å¾€ä¸‹çœ‹,æ¥ä¸‹æ¥ä½ ä¸€å®šä¼šè§‰å¾—ä½¿ç”¨UIViewçº§åˆ«çš„åŠ¨ç”»æ˜¯å¤šä¹ˆè½»æ¾ğŸ˜†,è®©æˆ‘ä»¬å¼€å§‹è½»æ¾ä¸€ä¸‹ğŸ˜ƒ.ä¸‹é¢çœ‹ä¸€ä¸‹æ€ä¹ˆåœ¨æ˜¾ç¤ºå’Œéšè—è§†å›¾æ—¶ä½¿ç”¨åŠ¨ç”».</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">void</span>)startLodingWormHUD&#123;</span><br><span class="line">    <span class="keyword">self</span>.isShowing = <span class="literal">YES</span>;</span><br><span class="line">    [<span class="keyword">self</span>.presentingView addSubview:<span class="keyword">self</span>];</span><br><span class="line">    <span class="comment">//åŠ¨èµ·æ¥.æ˜¾ç¤ºæŒ‡ç¤ºå™¨çš„æ—¶å€™æ‰å¼€å§‹è®¾ç½®åŠ¨ç”»æ•ˆæœ</span></span><br><span class="line">    [<span class="keyword">self</span> firstWormAnimation];</span><br><span class="line">    [<span class="keyword">self</span> secondWormAnimation];</span><br><span class="line">    [<span class="keyword">self</span> thirdWormAnimation];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">self</span>.transform = <span class="built_in">CGAffineTransformMakeScale</span>(<span class="number">0.1</span>, <span class="number">0.1</span>);</span><br><span class="line">    [<span class="built_in">UIView</span> animateKeyframesWithDuration:<span class="number">0.6</span> delay:<span class="number">0.0</span> options:<span class="number">0</span> animations:^&#123;</span><br><span class="line">        [<span class="built_in">UIView</span> addKeyframeWithRelativeStartTime:<span class="number">0</span> relativeDuration:<span class="number">0.5</span> animations:^&#123;</span><br><span class="line">            <span class="keyword">self</span>.transform = <span class="built_in">CGAffineTransformMakeScale</span>(<span class="number">1.3</span>, <span class="number">1.3</span>);</span><br><span class="line">        &#125;];</span><br><span class="line">        [<span class="built_in">UIView</span> addKeyframeWithRelativeStartTime:<span class="number">0.5</span> relativeDuration:<span class="number">0.5</span> animations:^&#123;</span><br><span class="line">            <span class="keyword">self</span>.transform = <span class="built_in">CGAffineTransformIdentity</span>;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125; completion: <span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)endLodingWormHUD&#123;</span><br><span class="line">    <span class="comment">//éšè—æŒ‡ç¤ºå™¨,åŒæ—¶ç§»é™¤åŠ¨ç”»</span></span><br><span class="line">    [<span class="built_in">UIView</span> animateKeyframesWithDuration:<span class="number">0.6</span> delay:<span class="number">0</span> options:<span class="number">0</span> animations:^&#123;</span><br><span class="line">        [<span class="built_in">UIView</span> addKeyframeWithRelativeStartTime:<span class="number">0</span> relativeDuration:<span class="number">0.5</span> animations:^&#123;</span><br><span class="line">            <span class="keyword">self</span>.transform = <span class="built_in">CGAffineTransformMakeScale</span>(<span class="number">1.2</span>, <span class="number">1.2</span>);</span><br><span class="line">        &#125;];</span><br><span class="line">        [<span class="built_in">UIView</span> addKeyframeWithRelativeStartTime:<span class="number">0.5</span> relativeDuration:<span class="number">0.5</span> animations:^&#123;</span><br><span class="line">            <span class="keyword">self</span>.transform = <span class="built_in">CGAffineTransformMakeScale</span>(<span class="number">0.1</span>, <span class="number">0.1</span>);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">    &#125; completion:^(<span class="built_in">BOOL</span> finished)&#123;</span><br><span class="line">        <span class="keyword">self</span>.isShowing = <span class="literal">NO</span>;</span><br><span class="line">        [<span class="keyword">self</span>.firstWormShapeLayer removeAnimationForKey:WORM_ANIMATION_KEY_FIRST];</span><br><span class="line">        [<span class="keyword">self</span>.secondWormShapeLayer removeAnimationForKey:WORM_ANIMATION_KEY_SECOND];</span><br><span class="line">        [<span class="keyword">self</span>.thirdWormShapeLayer removeAnimationForKey:WORM_ANIMATION_KEY_THIRD];</span><br><span class="line">        [<span class="keyword">self</span> removeFromSuperview];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨æ­¤ä¹‹å‰ä½ è¿˜ä¸äº†è§£UIViewåŠ¨ç”»çš„åŸºæœ¬å˜åŒ–,å¯å‚è€ƒ<a href="/2016/03/11/Interpretation-of-the-relationship-between-CGAffineTransform-iOS-and-matrix/">ç†è§£iOSä¸­CGAffineTransformä¸çŸ©é˜µçš„å…³ç³»</a></p>
<p>æœ€åçœ‹ä¸€ä¸‹ç»“åˆæŒ‡ç¤ºå™¨åå‹¤å¥‹è™«å­çš„æœ€ç»ˆæ•ˆæœ</p>
<img src="/images/a-diligent-worm-in-iOS.gif" class="" title="a-diligent-worm-in-iOS">

<h1 id="åè¯­"><a href="#åè¯­" class="headerlink" title="åè¯­"></a>åè¯­</h1><p>ã€€ã€€ä»ä¸€å¼€å§‹æ¥è§¦åŠ¨ç”»åˆ°å®ç°ä¸€ä¸ªå®Œæ•´çš„åŠ¨ç”»ä¸­é—´,è‚¯å®šä¼šç»å†å¾ˆå¤šå›°æƒ‘ä¸ä¸è§£,ç„¶åå°±è¦ä¸åœæœç´¢æŸ¥æ–‡æ¡£äº†,è¿™ä¸ªè¿‡ç¨‹è™½ç„¶å¾ˆç´¯,ä½†æ˜¯ä¸€æ—¦ä½ æŠŠæ•ˆæœå®ç°äº†,åŸç†æƒ³æ˜ç™½äº†,é‚£æ˜¯å¤šä¹ˆäº«å—çš„ä¸€ä»¶äº‹æƒ….è¿™é‡Œæˆ‘ç»™ä¸€ä¸ªå»ºè®®,ç”±äºiOSåŠ¨ç”»ä¸­æœ‰å¤ªå¤šç±»å’Œå±æ€§,æ–¹æ³•,ä½ ä¸å¯èƒ½ä¸€ä¸‹å­å°±æŠŠä»–ä»¬éƒ½æ˜ç™½é€å½».ä¸€å¼€å§‹è‚¯å®šæ˜¯è¦å…ˆæ‰¾å‡†å‡ ä¸ªåŸºæœ¬çš„æ¦‚å¿µå…ˆç†è§£äº†,ç„¶åå°è¯•åŠ¨æ‰‹å†™demo,å®ç°ä¸€äº›åŸºç¡€æ•ˆæœ.å†æ…¢æ…¢å°†ä»–ä»¬ç»“åˆèµ·æ¥æœç€ä½ çš„ç›®æ ‡æ•ˆæœå‰è¿›.å¦‚æœä¸­é€”å‘ç°èµ°ä¸åŠ¨äº†,æ•ˆæœå®ç°å¾ˆä¹…ä¹Ÿä¸èƒ½å®Œæˆ,é‚£å¾ˆå¯èƒ½æ˜¯å°‘ç”¨äº†æŸäº›å¯¹è±¡,å±æ€§,æ–¹æ³•,æˆ–è€…ä½ çš„åŸºç¡€å›¾å½¢éƒ½æ˜¯é”™çš„.æ¯”å¦‚æœ¬æ–‡,ä¸€å¼€å§‹æ²¡æœ‰ä½¿ç”¨åŠ¨ç”»ç»„,å‘ç°å¾ˆå¤šæ•ˆæœåšä¸å‡º,ç„¶åæˆ‘æŸ¥äº†ä¸€ä¸‹æ–‡æ¡£èµ„æ–™å‘ç°å¯ä»¥ä½¿ç”¨åŠ¨ç”»ç»„å®ç°,æ•ˆæœå¾ˆå®¹æ˜“å°±å‡ºæ¥äº†.åŸºç¡€å›¾å½¢ä¹Ÿæ˜¯,ä»ä¸€ä¸ªåŠåœ†å¼§åˆ°ä¸¤ä¸ªåŠåœ†å¼§,å®ç°èµ·æ¥äº‹åŠåŠŸå€.è¿™ä¸ªè¿‡ç¨‹éœ€è¦æ—¶é—´å’Œç»éªŒ,æ…¢æ…¢æ¥å§,ä¸€èµ·è¿›æ­¥!<br>ã€€ã€€è‡³æ­¤,å‹¤å¥‹è™«å­çš„å®Œæ•´æ•ˆæœéƒ½å·²ç»å®ç°äº†.è¿˜æœ‰æ²¡å¤šå…·ä½“ç»†èŠ‚ä¸Šé¢å¹¶æ²¡æœ‰æåˆ°.æœ¬æ–‡æ‰€å®ç°çš„æŒ‡ç¤ºå™¨æºç å’Œä½¿ç”¨Demoå¯ä»¥ä»<a href="/2016/03/21/iOS-animation-design-of-the-worm-run/#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">æœ¬æ–‡æºç :GitHub</a>ä¸­æ‰¾åˆ°,å¯ä»¥çš„è¯å¸®å¿™ç‚¹ä¸€ä¸‹<strong>Star</strong>,å¥½è®©æ›´å¤šäººçœ‹åˆ°.<iframe src="https://ghbtns.com/github-btn.html?user=Anubhav Gain543&repo=CCWormHUD&type=star&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe><br>ã€€ã€€å¸Œæœ›å¤§å®¶èƒ½ä»æœ¬æ–‡ä¸­å¾—åˆ°è‡ªå·±éœ€è¦çš„ä¸œè¥¿,å¦‚æœä½ æœ‰æ›´å¥½çš„æƒ³æ³•æˆ–å‘ç°æœ¬æ–‡çš„ä¸è¶³,æ¬¢è¿æŒ‡å‡ºæ¥.</p>
<h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><p><a target="_blank" rel="noopener" href="https://github.com/Anubhav Gain543/CCWormHUD">æœ¬æ–‡æºç :GitHub</a><br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/kenshincui/p/3972100.html">iOSå¼€å‘ç³»åˆ—â€“è®©ä½ çš„åº”ç”¨â€œåŠ¨â€èµ·æ¥</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/xiongbaoxr/article/details/50890565">æŒ‰é’®æ‰“å‹¾åŠ¨ç”»ç‰¹æ•ˆ</a><br><a target="_blank" rel="noopener" href="http://blog.Anubhav Gaindever.com/2016/03/11/Interpretation-of-the-relationship-between-CGAffineTransform-iOS-and-matrix">ç†è§£iOSä¸­CGAffineTransformä¸çŸ©é˜µçš„å…³ç³»</a><br><strong>ä¸‹é¢æ˜¯å·¥å…·</strong><br><a target="_blank" rel="noopener" href="http://netcetera.org/camtf-playground.html">CAMediaTimingFunction playground</a><br><a target="_blank" rel="noopener" href="http://pan.baidu.com/s/1i4mLxGx">Sketchä¸‹è½½ å¯†ç :5d2b</a><br><a target="_blank" rel="noopener" href="http://pan.baidu.com/s/1dDLPi5F">PaintCodeä¸‹è½½ å¯†ç :ftpt</a></p>

	</div>
		    <footer><div id="footer" style="padding: 30px 0; background: #2b2b2b;">

	<div class="author-section" style="text-align: center; margin-bottom: 20px;">
		<img src="/img/author.jpg" alt="Anubhav Gain" style="width: 100px; height: 100px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 0 20px rgba(255,255,255,0.3); margin-bottom: 15px;">
		<h3 style="color: #fff; margin: 10px 0; font-size: 24px;">Anubhav Gain</h3>
		<p style="color: #ccc; font-style: italic; margin: 10px 0;">Cybersecurity Professional & Developer</p>
	</div>

	<div class="social-font" class="clearfix" style="text-align: center; margin: 20px 0;">
		<a href="https://github.com/mranv" target="_blank" class="icon-github" title="GitHub" style="font-size: 28px; margin: 0 10px; color: #fff; transition: color 0.3s;"></a>
		<a href="https://twitter.com/anubhavgain" target="_blank" class="icon-twitter" title="Twitter" style="font-size: 28px; margin: 0 10px; color: #fff; transition: color 0.3s;"></a>
		<a href="https://linkedin.com/in/anubhavgain" target="_blank" class="icon-linkedin" title="LinkedIn" style="font-size: 28px; margin: 0 10px; color: #fff; transition: color 0.3s;"></a>
		<a href="mailto:contact@anubhavgain.com" target="_blank" class="icon-email" title="Email" style="font-size: 28px; margin: 0 10px; color: #fff; transition: color 0.3s;"></a>
		<a href="/atom.xml" target="_blank" class="icon-rss" title="RSS Feed" style="font-size: 28px; margin: 0 10px; color: #fff; transition: color 0.3s;"></a>
	</div>

	<section class="info" style="text-align: center; margin: 20px 0;">
		<p style="color: #ccc; font-size: 16px; margin: 10px 0;">æ— ç«‹è¶³å¢ƒï¼Œæ˜¯æ–¹å¹²å‡€</p>
	</section>

	<p class="copyright" style="text-align: center; color: #888; font-size: 14px; margin-top: 30px; padding-top: 20px; border-top: 1px solid #444;">
		Made with <span style="color: #e74c3c;">â¤</span> by <a href="/about" target="_blank" title="Anubhav Gain" style="color: #fff; text-decoration: none;">Anubhav Gain</a> Â© 2024
	</p>
</div>
</footer>


	</article>

<nav class="article-nav clearfix">

 <div class="prev" >
 <a href="/2016/03/25/2016-03-25-the-design-principle-and-implementation-of-extensible-account-system-2/" title="å¯ç»‘å®šå¯æ‰©å±•çš„å¸å·ç³»ç»Ÿè®¾è®¡åŸç†åŠå…¶å®ç°(äºŒ)">
  <strong>ä¸Šä¸€ç¯‡ï¼š</strong><br/>
  <span>
  å¯ç»‘å®šå¯æ‰©å±•çš„å¸å·ç³»ç»Ÿè®¾è®¡åŸç†åŠå…¶å®ç°(äºŒ)</span>
</a>
</div>


<div class="next">
<a href="/2016/03/11/2016-03-11-Interpretation-of-the-relationship-between-CGAffineTransform-iOS-and-matrix/"  title="ç†è§£iOSä¸­CGAffineTransformä¸çŸ©é˜µçš„å…³ç³»">
 <strong>ä¸‹ä¸€ç¯‡ï¼š</strong><br/>
 <span>ç†è§£iOSä¸­CGAffineTransformä¸çŸ©é˜µçš„å…³ç³»
</span>
</a>
</div>

</nav>



<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>




</div>
      <div class="openaside"><a class="navbutton" href="#" title="æ˜¾ç¤ºä¾§è¾¹æ "></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">æ–‡ç« ç›®å½•</strong>

 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E6%9B%B4%E6%96%B0%E8%AF%B4%E6%98%8E"><span class="toc-number">1.</span> <span class="toc-text">æ–‡æ¡£æ›´æ–°è¯´æ˜</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">2.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9C%8B%E4%B8%8A%E7%9A%84%E5%8A%A8%E7%94%BB"><span class="toc-number">3.</span> <span class="toc-text">çœ‹ä¸Šçš„åŠ¨ç”»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%9D%E8%80%83"><span class="toc-number">4.</span> <span class="toc-text">æ€è€ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3iOS%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%8A%A8%E7%94%BB%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">äº†è§£iOSä¸­å®ç°åŠ¨ç”»çš„æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%AA%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%8F%AF%E4%BB%A5%E5%88%A9%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text">å“ªäº›å·¥å…·å¯ä»¥åˆ©ç”¨?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#iOS%E5%8A%A8%E7%94%BB%E7%9A%84%E5%87%A0%E4%B8%AA%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5"><span class="toc-number">4.3.</span> <span class="toc-text">iOSåŠ¨ç”»çš„å‡ ä¸ªé‡è¦æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%86%E5%88%86%E5%8A%A8%E7%94%BB-%E7%AE%80%E5%8C%96%E6%80%9D%E8%B7%AF"><span class="toc-number">4.4.</span> <span class="toc-text">æ‹†åˆ†åŠ¨ç”»,ç®€åŒ–æ€è·¯</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E5%8A%A8%E6%89%8B"><span class="toc-number">5.</span> <span class="toc-text">å¼€å§‹åŠ¨æ‰‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%8A%A8%E7%94%BB%E7%9A%84%E6%A0%B8%E5%BF%83%E9%83%A8%E5%88%86"><span class="toc-number">5.1.</span> <span class="toc-text">å®ç°åŠ¨ç”»çš„æ ¸å¿ƒéƒ¨åˆ†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E5%90%88%E5%8A%A8%E7%94%BB%E5%AE%9E%E7%8E%B0%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C"><span class="toc-number">5.2.</span> <span class="toc-text">æ•´åˆåŠ¨ç”»å®ç°æœ€ç»ˆæ•ˆæœ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E4%BB%A3%E7%A0%81-%E5%AE%9E%E7%8E%B0HUD%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">5.3.</span> <span class="toc-text">ä¼˜åŒ–ä»£ç ,å®ç°HUDçš„åŠŸèƒ½</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%8E%E8%AF%AD"><span class="toc-number">6.</span> <span class="toc-text">åè¯­</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB"><span class="toc-number">6.1.</span> <span class="toc-text">æ¨èé˜…è¯»</span></a></li></ol></li></ol>

  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="éšè—ä¾§è¾¹æ "></a></div>
<aside class="clearfix">


<div class="categorieslist">
	<p class="asidetitle">åˆ†ç±»</p>
		<ul>


			<li><a href="/categories/Blockchain/" title="Blockchain">Blockchain<sup>7</sup></a></li>



			<li><a href="/categories/C/" title="C++">C++<sup>1</sup></a></li>



			<li><a href="/categories/Golang/" title="Golang">Golang<sup>5</sup></a></li>



			<li><a href="/categories/LetCode/" title="LetCode">LetCode<sup>10</sup></a></li>



			<li><a href="/categories/Macåº”ç”¨/" title="Macåº”ç”¨">Macåº”ç”¨<sup>4</sup></a></li>



			<li><a href="/categories/iOS/" title="iOS">iOS<sup>28</sup></a></li>



			<li><a href="/categories/iOSå®‰å…¨/" title="iOSå®‰å…¨">iOSå®‰å…¨<sup>2</sup></a></li>



			<li><a href="/categories/å…¶ä»–/" title="å…¶ä»–">å…¶ä»–<sup>1</sup></a></li>



			<li><a href="/categories/åšæ–‡æ¨è/" title="åšæ–‡æ¨è">åšæ–‡æ¨è<sup>1</sup></a></li>



			<li><a href="/categories/å®‰å…¨/" title="å®‰å…¨">å®‰å…¨<sup>1</sup></a></li>



			<li><a href="/categories/åº•å±‚åŸç†/" title="åº•å±‚åŸç†">åº•å±‚åŸç†<sup>2</sup></a></li>



			<li><a href="/categories/æ•°æ®åº“/" title="æ•°æ®åº“">æ•°æ®åº“<sup>1</sup></a></li>



			<li><a href="/categories/æ¶æ„ä¸è®¾è®¡/" title="æ¶æ„ä¸è®¾è®¡">æ¶æ„ä¸è®¾è®¡<sup>6</sup></a></li>



			<li><a href="/categories/ç”Ÿæ´»/" title="ç”Ÿæ´»">ç”Ÿæ´»<sup>3</sup></a></li>



			<li><a href="/categories/ç½‘ç»œ/" title="ç½‘ç»œ">ç½‘ç»œ<sup>1</sup></a></li>


		</ul>
</div>



<div class="tagslist">
	<p class="asidetitle">æ ‡ç­¾</p>
		<ul class="clearfix">


				<li><a href="/tags/Swift/" title="Swift">Swift<sup>7</sup></a></li>



				<li><a href="/tags/iOS/" title="iOS">iOS<sup>7</sup></a></li>



				<li><a href="/tags/LetCode-Easy/" title="LetCode-Easy">LetCode-Easy<sup>6</sup></a></li>



				<li><a href="/tags/Ethereum/" title="Ethereum">Ethereum<sup>6</sup></a></li>



				<li><a href="/tags/å¯æ‰©å±•/" title="å¯æ‰©å±•">å¯æ‰©å±•<sup>4</sup></a></li>



				<li><a href="/tags/å®‰å…¨/" title="å®‰å…¨">å®‰å…¨<sup>4</sup></a></li>



				<li><a href="/tags/LetCode-Medium/" title="LetCode-Medium">LetCode-Medium<sup>4</sup></a></li>



				<li><a href="/tags/Mac/" title="Mac">Mac<sup>4</sup></a></li>



				<li><a href="/tags/ç±»åº“/" title="ç±»åº“">ç±»åº“<sup>3</sup></a></li>



				<li><a href="/tags/goroutine/" title="goroutine">goroutine<sup>3</sup></a></li>



				<li><a href="/tags/UI/" title="UI">UI<sup>3</sup></a></li>



				<li><a href="/tags/PHP/" title="PHP">PHP<sup>2</sup></a></li>



				<li><a href="/tags/iOSåŠ¨ç”»/" title="iOSåŠ¨ç”»">iOSåŠ¨ç”»<sup>2</sup></a></li>



				<li><a href="/tags/Tree/" title="Tree">Tree<sup>2</sup></a></li>



				<li><a href="/tags/runtime/" title="runtime">runtime<sup>2</sup></a></li>



				<li><a href="/tags/æ„Ÿæƒ³/" title="æ„Ÿæƒ³">æ„Ÿæƒ³<sup>2</sup></a></li>



				<li><a href="/tags/Macåº”ç”¨/" title="Macåº”ç”¨">Macåº”ç”¨<sup>2</sup></a></li>



				<li><a href="/tags/é€†å‘å·¥ç¨‹/" title="é€†å‘å·¥ç¨‹">é€†å‘å·¥ç¨‹<sup>1</sup></a></li>



				<li><a href="/tags/å¼‚å¸¸/" title="å¼‚å¸¸">å¼‚å¸¸<sup>1</sup></a></li>



				<li><a href="/tags/åšæ–‡æ¨è/" title="åšæ–‡æ¨è">åšæ–‡æ¨è<sup>1</sup></a></li>


		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">å‹æƒ…é“¾æ¥</p>
    <ul>

          <li>

            	<a href="https://www.google.com.hk" target="_blank" title="å…±åŒçš„è€å¸ˆ">å…±åŒçš„è€å¸ˆ</a>

          </li>

          <li>

            	<a href="http://tengj.top" target="_blank" title="å˜Ÿå˜Ÿç‹¬ç«‹åšå®¢">å˜Ÿå˜Ÿç‹¬ç«‹åšå®¢</a>

          </li>

          <li>

            	<a href="https://blog.6ag.cn" target="_blank" title="å…­é˜¿å“¥åšå®¢">å…­é˜¿å“¥åšå®¢</a>

          </li>

    </ul>
</div>




  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS è®¢é˜…</a>
</div>

</aside>
</div>
    </div>
        <footer><div id="footer" style="padding: 30px 0; background: #2b2b2b;">

	<div class="author-section" style="text-align: center; margin-bottom: 20px;">
		<img src="/img/author.jpg" alt="Anubhav Gain" style="width: 100px; height: 100px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 0 20px rgba(255,255,255,0.3); margin-bottom: 15px;">
		<h3 style="color: #fff; margin: 10px 0; font-size: 24px;">Anubhav Gain</h3>
		<p style="color: #ccc; font-style: italic; margin: 10px 0;">Cybersecurity Professional & Developer</p>
	</div>

	<div class="social-font" class="clearfix" style="text-align: center; margin: 20px 0;">
		<a href="https://github.com/mranv" target="_blank" class="icon-github" title="GitHub" style="font-size: 28px; margin: 0 10px; color: #fff; transition: color 0.3s;"></a>
		<a href="https://twitter.com/anubhavgain" target="_blank" class="icon-twitter" title="Twitter" style="font-size: 28px; margin: 0 10px; color: #fff; transition: color 0.3s;"></a>
		<a href="https://linkedin.com/in/anubhavgain" target="_blank" class="icon-linkedin" title="LinkedIn" style="font-size: 28px; margin: 0 10px; color: #fff; transition: color 0.3s;"></a>
		<a href="mailto:contact@anubhavgain.com" target="_blank" class="icon-email" title="Email" style="font-size: 28px; margin: 0 10px; color: #fff; transition: color 0.3s;"></a>
		<a href="/atom.xml" target="_blank" class="icon-rss" title="RSS Feed" style="font-size: 28px; margin: 0 10px; color: #fff; transition: color 0.3s;"></a>
	</div>

	<section class="info" style="text-align: center; margin: 20px 0;">
		<p style="color: #ccc; font-size: 16px; margin: 10px 0;">æ— ç«‹è¶³å¢ƒï¼Œæ˜¯æ–¹å¹²å‡€</p>
	</section>

	<p class="copyright" style="text-align: center; color: #888; font-size: 14px; margin-top: 30px; padding-top: 20px; border-top: 1px solid #444;">
		Made with <span style="color: #e74c3c;">â¤</span> by <a href="/about" target="_blank" title="Anubhav Gain" style="color: #fff; text-decoration: none;">Anubhav Gain</a> Â© 2024
	</p>
</div>
</footer>
    <script src="/js/responsive-enhance.js"></script>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/responsive-enhance.js"></script>
    <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/responsive-enhance.js"></script>
    <script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });

  $(window).resize(function(){
    getSize();
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');

      $('#toc.toc-aside').css('display', 'none');

    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="å¾®ä¿¡"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="äººäºº"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="å¾®åš"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});
</script>




<script type="text/javascript">

var disqus_shortname = 'Anubhav Gaindever';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>








<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
});
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?c7eea4ba5ad764e80b289322c5854596";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="è¿”å›é¡¶éƒ¨"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  <!-- Google Translate Widget -->
<div id="google_translate_element" style="position: fixed; top: 10px; right: 10px; z-index: 9999;"></div>
<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'zh-CN',
    includedLanguages: 'en,hi,bn,es,fr,de,ja,ko,pt,ru,ar',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
  }, 'google_translate_element');
}
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<!-- End Google Translate Widget -->

</body>
</html>
